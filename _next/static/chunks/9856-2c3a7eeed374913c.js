"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9856],{7739:(e,r,s)=>{s.d(r,{T:()=>n});var a=s(7876),t=s(4232),l=s(3951);let n=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,a.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:r,...t})});n.displayName="Textarea"},9856:(e,r,s)=>{s.r(r),s.d(r,{default:()=>F});var a=s(7876),t=s(8992),l=s(3810),n=s(513),o=s(7041),i=s(4232),c=s(2987),d=s(3951),m=s(53);let u=t.Op,x=i.createContext({}),b=e=>{let{...r}=e;return(0,a.jsx)(x.Provider,{value:{name:r.name},children:(0,a.jsx)(t.xI,{...r})})},h=()=>{let e=i.useContext(x),r=i.useContext(f),{getFieldState:s,formState:a}=(0,t.xW)(),l=s(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:n}=r;return{id:n,name:e.name,formItemId:"".concat(n,"-form-item"),formDescriptionId:"".concat(n,"-form-item-description"),formMessageId:"".concat(n,"-form-item-message"),...l}},f=i.createContext({}),j=i.forwardRef((e,r)=>{let{className:s,...t}=e,l=i.useId();return(0,a.jsx)(f.Provider,{value:{id:l},children:(0,a.jsx)("div",{ref:r,className:(0,d.cn)("space-y-2",s),...t})})});j.displayName="FormItem";let g=i.forwardRef((e,r)=>{let{className:s,...t}=e,{error:l,formItemId:n}=h();return(0,a.jsx)(m.J,{ref:r,className:(0,d.cn)(l&&"text-destructive",s),htmlFor:n,...t})});g.displayName="FormLabel";let p=i.forwardRef((e,r)=>{let{...s}=e,{error:t,formItemId:l,formDescriptionId:n,formMessageId:o}=h();return(0,a.jsx)(c.DX,{ref:r,id:l,"aria-describedby":t?"".concat(n," ").concat(o):"".concat(n),"aria-invalid":!!t,...s})});p.displayName="FormControl";let N=i.forwardRef((e,r)=>{let{className:s,...t}=e,{formDescriptionId:l}=h();return(0,a.jsx)("p",{ref:r,id:l,className:(0,d.cn)("text-sm text-muted-foreground",s),...t})});N.displayName="FormDescription";let y=i.forwardRef((e,r)=>{let{className:s,children:t,...l}=e,{error:n,formMessageId:o}=h(),i=n?String(null==n?void 0:n.message):t;return i?(0,a.jsx)("p",{ref:r,id:o,className:(0,d.cn)("text-sm font-medium text-destructive",s),...l,children:i}):null});y.displayName="FormMessage";var v=s(8971),w=s(7739),I=s(9688),S=s(5263);let k=async e=>{let{data:r,error:s}=await S.S.from("blogs").select("*").eq("email",e).maybeSingle();return s?(console.log(s),{data:null,error:s}):{data:r,error:s}},B=async e=>{let{data:r,error:s}=await S.S.from("blogs").select("*").eq("sid",e).maybeSingle();return s?(console.log(s),{data:null,error:s}):{data:r,error:s}},C=async e=>{let{error:r}=await S.S.from("blogs").insert(e);return r?(console.log(r),r):null};var R=s(3125),Y=s(2669);let E=n.Ik({sid:n.Yj().min(8,"SID is required and must be 8 digits").max(8,"SID is required and must be 8 digits"),name:n.Yj().min(2,"Name must be at least 2 characters").max(100,"Name must be less than 100 characters"),branch:n.Yj().min(2,"Branch is required").max(100,"Branch must be less than 100 characters"),bio:n.Yj().min(10,"Bio must be at least 10 characters").max(500,"Bio must be less than 500 characters"),email:n.Yj().email("Invalid email address"),content:n.Yj().min(50,"Blog content must be at least 50 characters").max(1e4,"Blog content must be less than 10000 characters"),image:n.Yj().min(0,"Image is Required")}),F=()=>{let[e,r]=(0,i.useState)(!1),s=(0,t.mN)({resolver:(0,l.u)(E),defaultValues:{sid:"",name:"",branch:"",bio:"",content:"",image:""}}),n=async e=>{if(console.log({data:e}),r(!0),!e.email.includes("pec.edu.in")){I.oR.error("Please enter PEC Email ID",{description:"Please enter a valid email address."}),r(!1);return}let s=e.email.trim();if((await k(s)).data){I.oR.error("You have already submitted a blog post",{description:"You can only submit one blog post"}),r(!1);return}let a=e.sid.trim();if((await B(a)).data){I.oR.error("You have already submitted a blog post",{description:"You can only submit one blog post"}),r(!1);return}let t=await C(e);t?(I.oR.error("Failed to submit blog post",{description:t.message}),r(!1)):I.oR.success("Blog post submitted successfully"),r(!1)};return(0,a.jsx)("div",{className:"min-h-screen bg-background py-12 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"bg-card border border-border rounded-lg p-8 shadow-sm",children:[(0,a.jsx)("h2",{className:"text-xl font-medium text-card-foreground mb-6",children:"Add New Blog Post"}),(0,a.jsx)(u,{...s,children:(0,a.jsxs)("form",{onSubmit:s.handleSubmit(n),className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-10 w-full",children:[(0,a.jsx)(b,{control:s.control,name:"sid",render:e=>{let{field:r}=e;return(0,a.jsxs)(j,{className:"w-full",children:[(0,a.jsx)(g,{children:"SID"}),(0,a.jsx)(p,{children:(0,a.jsx)(v.p,{placeholder:"Enter your SID",...r,className:"border-2 border-black"})}),(0,a.jsx)(y,{})]})}}),(0,a.jsx)(b,{control:s.control,name:"name",render:e=>{let{field:r}=e;return(0,a.jsxs)(j,{className:"w-full",children:[(0,a.jsx)(g,{children:"Name"}),(0,a.jsx)(p,{children:(0,a.jsx)(v.p,{placeholder:"Enter your name",...r,className:"border-2 border-black"})}),(0,a.jsx)(y,{})]})}})]}),(0,a.jsxs)("div",{className:"flex flex-row gap-10",children:[(0,a.jsx)(b,{control:s.control,name:"branch",render:e=>{let{field:r}=e;return(0,a.jsxs)(j,{className:"w-full",children:[(0,a.jsx)(g,{children:"Branch"}),(0,a.jsx)(p,{children:(0,a.jsx)(v.p,{placeholder:"Enter your branch or department",...r,className:"border-2 border-black"})}),(0,a.jsx)(y,{})]})}}),(0,a.jsx)(b,{control:s.control,name:"email",render:e=>{let{field:r}=e;return(0,a.jsxs)(j,{className:"w-full",children:[(0,a.jsx)(g,{children:"Email"}),(0,a.jsx)(p,{children:(0,a.jsx)(v.p,{placeholder:"Enter your PEC Email ID",...r,className:"border-2 border-black"})}),(0,a.jsx)(y,{})]})}})]}),(0,a.jsx)(b,{control:s.control,name:"bio",render:e=>{let{field:r}=e;return(0,a.jsxs)(j,{children:[(0,a.jsx)(g,{children:"Bio"}),(0,a.jsx)(p,{children:(0,a.jsx)(w.T,{placeholder:"Write a short bio about yourself",className:"min-h-[100px] resize-none border-2 border-black",...r})}),(0,a.jsx)(N,{children:"Insert Your Image to be featured in the website"}),(0,a.jsx)(y,{})]})}}),(0,a.jsx)(b,{control:s.control,name:"image",render:e=>{let{field:r}=e;return(0,a.jsxs)(j,{children:[(0,a.jsx)(g,{children:"Image"}),(0,a.jsx)(p,{children:(0,a.jsx)(R.A,{setData:r.onChange,id:"imageBlob"})}),(0,a.jsx)(N,{children:"Brief introduction about yourself (10-500 characters)"}),(0,a.jsx)(y,{})]})}}),(0,a.jsx)(b,{control:s.control,name:"content",render:e=>{let{field:r}=e;return(0,a.jsxs)(j,{children:[(0,a.jsx)(g,{children:"Blog Content"}),(0,a.jsx)(p,{children:(0,a.jsx)(Y.default,{placeholder:"Write your blog content here...",value:r.value,onChange:r.onChange,dontWantImage:!0})}),(0,a.jsx)(N,{children:"Your main blog content (minimum 50 characters)"}),(0,a.jsx)(y,{})]})}}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsx)(o.$,{type:"submit",className:"flex-1 sm:flex-none",disabled:e,children:e?"Submitting...":"Submit Blog Post"}),(0,a.jsx)(o.$,{type:"button",variant:"outline",onClick:()=>s.reset(),className:"flex-1 sm:flex-none",children:"Reset Form"})]})]})})]})})}}}]);