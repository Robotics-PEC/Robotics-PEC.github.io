(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4400],{2436:(e,a,t)=>{"use strict";t.d(a,{a:()=>s});var r=t(7876);t(4232);var i=t(612);let s=e=>{let{size:a="md",text:t,className:s,variant:n="spinner",isLoading:o,children:l}=e,c={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16"};return(0,r.jsx)(r.Fragment,{children:o?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center p-6 bg-background border w-full h-full min-h-screen",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4",children:[(()=>{switch(n){case"spinner":return(0,r.jsx)("div",{className:(0,i.cn)("relative animate-spin rounded-full border-4 border-primary/30 border-t-primary",c[a],s)});case"pulse":return(0,r.jsxs)("div",{className:(0,i.cn)("relative flex items-center justify-center",c[a],s),children:[(0,r.jsx)("div",{className:"absolute w-full h-full rounded-full bg-primary/20 animate-ping"}),(0,r.jsx)("div",{className:"absolute w-3/4 h-3/4 rounded-full bg-primary/40 animate-pulse"}),(0,r.jsx)("div",{className:"w-1/2 h-1/2 rounded-full bg-primary"})]});case"dots":return(0,r.jsx)("div",{className:(0,i.cn)("flex space-x-2",s),children:[0,1,2].map(e=>(0,r.jsx)("div",{className:(0,i.cn)("rounded-full bg-primary","sm"===a?"w-2 h-2":"md"===a?"w-3 h-3":"w-4 h-4","animate-bounce",0===e?"animate-delay-0":1===e?"animate-delay-150":"animate-delay-300")},e))});default:return null}})(),t&&(0,r.jsx)("p",{className:"text-foreground/80 animate-pulse text-sm md:text-base",children:t})]}),(0,r.jsx)("span",{className:"mt-4 font-medium",children:"Loading..."})]}):l})}},5495:(e,a,t)=>{"use strict";t.d(a,{Se:()=>c,V6:()=>o,VM:()=>g,jW:()=>d,ts:()=>n,vS:()=>l,xp:()=>u});var r=t(612),i=t(5263);let s=async e=>{let{data:a,error:t}=await i.S.storage.from("media").list(e);return t?(console.log(t),[]):null==a?void 0:a.map(e=>e.name)},n=async e=>{let a=await s(e),t=[];for(let r=0;r<a.length;r++){let{data:s}=i.S.storage.from("media").getPublicUrl("".concat(e,"/").concat(a[r]));t.push(s.publicUrl)}return t},o=async(e,a,t)=>{let s=a.split(".")[a.split(".").length-1],n="image/".concat(s),o=t.replace(/^data:image\/\w+;base64,/,""),l=(0,r.i)(o,n),c="".concat(e,"/").concat(a),{data:d,error:m}=await i.S.storage.from("media").upload(c,l,{contentType:n,upsert:!0});return m&&console.log(m),d},l=async e=>{let{data:a,error:t}=await i.S.storage.from("media").remove(e);if(t){console.log(t);return}return a},c=async(e,a)=>{let{data:t,error:r}=await i.S.storage.from("media").download("markdown/".concat(a,"/").concat(e.split(".")[0],"/").concat(e));return r?(console.log(r),null):await t.text()},d=async(e,a,t)=>{let s="text/markdown",n=new File([(0,r.OO)(t)],e,{type:s});await i.S.storage.from("media").upload("markdown/".concat(a,"/").concat(e.split(".")[0],"/").concat(e),n,{contentType:s,upsert:!0})},m=async e=>{let a=[],{data:t,error:r}=await i.S.storage.from("media").list(e,{limit:1e3});if(r)return console.error("Error listing files:",r),[];for(let r of t){var s;if(r.name&&(null===(s=r.metadata)||void 0===s?void 0:s.mimetype)!=="inode/directory"&&a.push("".concat(e?e+"/":"").concat(r.name)),r.name&&null===r.metadata){let t="".concat(e?e+"/":"").concat(r.name),i=await m(t);a.push(...i)}}return a},u=async(e,a)=>{let t=await m("markdown/".concat(a,"/").concat(e));if(t.length>0){let{data:e,error:a}=await i.S.storage.from("media").remove(t);if(a){console.log(a);return}return e}throw Error('No files in the folder "markdown/'.concat(a,"/").concat(e,'"'))},g=async(e,a)=>{let{data:t,error:r}=await i.S.storage.from("media").remove(["markdown/".concat(a,"/").concat(e.split(".")[0],"/").concat(e)]);if(r){console.log(r);return}return t}},5806:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>x});var r=t(7876),i=t(4232),s=t(7041),n=t(4587),o=t.n(n),l=t(53),c=t(4725),d=t(1354),m=t(345),u=t(5495),g=t(2436),f=t(6461),p=t(3125),h=t(3410);let v={heading:"",description:""},w={image1:"",image2:"",image3:""},x=()=>{let[e,a]=(0,i.useState)(!0),[t,n]=(0,i.useState)(v),[x,y]=(0,i.useState)([]),[b,j]=(0,i.useState)(w),[N,S]=(0,i.useState)(""),[k,E]=(0,i.useState)(""),[_,C]=(0,i.useState)("");(0,i.useEffect)(()=>{(async()=>{let e=await (0,u.ts)("hero");n(await (0,f.z)()),y(e),a(!1)})()},[]);let{toast:z}=(0,c.dj)(),F=async e=>{let a=0;for(let[e,t]of Object.entries(b))t&&a++;let t=(await (0,u.ts)(e)).map(e=>e.split("/").pop());for(let r=0;r<a;r++)await (0,u.vS)(["".concat(e,"/").concat(t[r])]);b.image1&&await (0,u.V6)(e,N,b.image1),b.image2&&await (0,u.V6)(e,k,b.image2),b.image3&&await (0,u.V6)(e,_,b.image3),z({title:"Success",description:"Uploaded all the images successfully"})},A=async()=>{let e=await (0,f.z)();if(e.heading==t.heading&&e.description==t.description&&""==N&&""==k&&""==_){z({title:"Error",description:"Please make some changes",variant:"destructive"});return}await F("hero");let a=await (0,f.a)(t);if(a){z({title:"Error",description:a.message,variant:"destructive"});return}z({title:"Success",description:"Hero data updated successfully"}),location.reload()},T=e=>{};return(0,r.jsx)(g.a,{isLoading:e,children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(h.A,{id:"heading",title:"Heading",htmlFor:"heading",onChange:n,placeholder:"Enter Heading",type:"TEXT",value:t.heading}),(0,r.jsx)(h.A,{id:"description",title:"Description",htmlFor:"description",onChange:n,placeholder:"Enter Description",type:"TEXT",value:t.description}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(l.J,{children:"Background Images"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:h-[260px] h-[1000px]",children:x.map((e,a)=>(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("div",{className:"relative w-full h-full",children:(0,r.jsx)(o(),{src:e,alt:"Background ".concat(a+1),fill:!0,className:"object-contain"})}),(0,r.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded-md",children:(0,r.jsxs)(s.$,{variant:"destructive",size:"sm",onClick:()=>T(a),children:[(0,r.jsx)(d.A,{className:"h-4 w-4 mr-1"})," Remove"]})})]},a))}),(0,r.jsxs)("div",{className:"grid gap-2 grid-cols-1 md:grid-cols-3",children:[(0,r.jsx)(p.A,{id:"image1",onChange:j,setFileName:S}),(0,r.jsx)(p.A,{id:"image2",onChange:j,setFileName:E}),(0,r.jsx)(p.A,{id:"image3",onChange:j,setFileName:C})]})]}),(0,r.jsxs)(s.$,{onClick:A,className:"mt-6 w-full",size:"lg",children:[(0,r.jsx)(m.A,{className:"h-4 w-4 mr-2"})," Save Changes"]})]})})}},6461:(e,a,t)=>{"use strict";t.d(a,{a:()=>s,z:()=>i});var r=t(5263);let i=async()=>{let{data:e,error:a}=await r.S.from("hero").select("*").eq("id","e32e2ff0-8a37-4b44-aded-db033dc95333");if(a&&console.log(a),!e)throw Error("Could not fetch data for hero section");return{heading:e[0].heading,description:e[0].description}},s=async e=>{let{error:a}=await r.S.from("hero").update(e).eq("id","e32e2ff0-8a37-4b44-aded-db033dc95333");return a?(console.log(a),a):null}},7041:(e,a,t)=>{"use strict";t.d(a,{$:()=>c,r:()=>l});var r=t(7876),i=t(4232),s=t(2987),n=t(9518),o=t(612);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef((e,a)=>{let{className:t,variant:i,size:n,asChild:c=!1,...d}=e,m=c?s.DX:"button";return(0,r.jsx)(m,{className:(0,o.cn)(l({variant:i,size:n,className:t})),ref:a,...d})});c.displayName="Button"},7700:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/components/HeroEditor",function(){return t(5806)}])}},e=>{var a=a=>e(e.s=a);e.O(0,[5352,6361,3466,4587,1875,9546,3564,8203,2669,3410,636,6593,8792],()=>a(7700)),_N_E=e.O()}]);