(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[319],{993:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var i=s(7876),a=s(4232),r=s(7041),l=s(457),n=s(4725),c=s(345),d=s(5104),o=s(3022),u=s(1354),m=s(727),p=s(3476),v=s(8070),h=s(2436),x=s(857);let f={id:"",title:"",description:"",date:void 0,participants:""},g=()=>{let{toast:e}=(0,n.dj)(),[t,s]=(0,a.useState)([]),[g,y]=(0,a.useState)(f),[j,N]=(0,a.useState)(null),[w,b]=(0,a.useState)(!0),[A,S]=(0,a.useState)(void 0);(0,a.useEffect)(()=>{let e=localStorage.getItem("activitiesData");if(e)try{s(JSON.parse(e))}catch(e){console.error("Failed to parse saved activities data:",e)}(async()=>{s(await (0,p.r4)()),b(!1)})()},[]);let C=async()=>{if(!g.title||!g.description||!g.participants){e({title:"Error",description:"All the fields are required",variant:"destructive"});return}if(!A){e({title:"Error",description:"Date is required",variant:"destructive"});return}g.date=(0,v.GP)(A,"dd/MM/yyyy");let{error:t}=await (0,p.LT)(g);if(t){e({title:t.name,description:t.message,variant:"destructive"});return}e({title:"Success",description:"Activity was successfully uploaded"}),s(e=>[...e,g]),y(f)},D=async()=>{if(!j)return;let t=await (0,p.J0)(g);if(t){e({title:"Error",description:t.message,variant:"destructive"});return}e({title:"Success",description:"Activity was successfully updated"}),s(e=>e.map(e=>e.id===j?g:e)),N(null),y(f)},E=e=>{var t,s,i;y(e),S(new Date("".concat(null===(t=e.date)||void 0===t?void 0:t.split("/")[2],"-").concat(null===(s=e.date)||void 0===s?void 0:s.split("/")[1],"-").concat(null===(i=e.date)||void 0===i?void 0:i.split("/")[0]))),N(e.id)},k=async t=>{let i=await (0,p.$y)(t);if(204===i.status)e({title:"Success",description:"Activity was successfully deleted"});else{var a;e({title:String(i.status),description:null===(a=i.error)||void 0===a?void 0:a.message,variant:"destructive"})}s(e=>e.filter(e=>e.id!==t)),j===t&&(N(null),y(f))};return(0,i.jsx)(h.a,{isLoading:w,children:(0,i.jsxs)("div",{className:"space-y-8",children:[(0,i.jsxs)(m.Zp,{className:"p-6",children:[(0,i.jsx)("h3",{className:"text-lg font-medium mb-4",children:j?"Edit Activity":"Add New Activity"}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)(x.A,{id:"title",value:g.title,onChange:y,placeholder:"Introduction to ROS",htmlFor:"title",type:"TEXT",title:"Title"}),(0,i.jsx)(x.A,{id:"description",value:g.description,onChange:y,placeholder:"Hands-on workshop introducing fundamentals of Robot Operating System (ROS) development.",htmlFor:"description",type:"TEXT",title:"Description"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsx)(x.A,{htmlFor:"date",title:"Date",id:"date",value:g.date,onChange:y,placeholder:"".concat(new Date().getDate(),"/").concat(new Date().getMonth(),"/").concat(new Date().getFullYear()),type:"DATE",date:A,setDate:S}),(0,i.jsx)(x.A,{id:"participants",value:g.participants,onChange:y,placeholder:"50",htmlFor:"participants",type:"TEXT",title:"Participants"})]}),j?(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsxs)(r.$,{onClick:D,className:"flex-1",children:[(0,i.jsx)(c.A,{className:"h-4 w-4 mr-2"})," Update Activity"]}),(0,i.jsx)(r.$,{variant:"destructive",onClick:()=>{N(null),y(f)},children:"Cancel"})]}):(0,i.jsxs)(r.$,{onClick:C,className:"w-full",children:[(0,i.jsx)(d.A,{className:"h-4 w-4 mr-2"})," Add Activity"]})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("h3",{className:"text-lg font-medium",children:"Current Activities"}),0===t.length?(0,i.jsx)("p",{className:"text-gray-500 italic",children:"No activities added yet."}):(0,i.jsx)(l.nD,{type:"single",collapsible:!0,className:"w-full",children:t.map(e=>(0,i.jsxs)(l.As,{value:e.id,children:[(0,i.jsx)(l.$m,{children:(0,i.jsx)("div",{className:"flex justify-between items-center w-full pr-4",children:(0,i.jsx)("span",{children:e.title})})}),(0,i.jsx)(l.ub,{children:(0,i.jsxs)("div",{className:"p-4 space-y-4",children:[(0,i.jsx)("p",{className:"text-sm font-medium",children:"Full Description:"}),(0,i.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm font-medium",children:"Date:"}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:e.date})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm font-medium",children:"Participants:"}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:e.participants})]})]}),(0,i.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,i.jsxs)(r.$,{size:"sm",variant:"outline",onClick:()=>E(e),children:[(0,i.jsx)(o.A,{className:"h-4 w-4 mr-1"})," Edit"]}),(0,i.jsxs)(r.$,{size:"sm",variant:"destructive",onClick:()=>k(e.id),children:[(0,i.jsx)(u.A,{className:"h-4 w-4 mr-1"})," Delete"]})]})]})})]},e.id))}),(0,i.jsxs)(r.$,{onClick:()=>{localStorage.setItem("activitiesData",JSON.stringify(t)),e({title:"Changes saved",description:"Activities have been updated successfully."})},className:"w-full mt-4",children:[(0,i.jsx)(c.A,{className:"h-4 w-4 mr-2"})," Save All Changes"]})]})]})})}},2436:(e,t,s)=>{"use strict";s.d(t,{a:()=>r});var i=s(7876);s(4232);var a=s(4317);let r=e=>{let{size:t="md",text:s,className:r,variant:l="spinner",isLoading:n,children:c}=e,d={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16"};return(0,i.jsx)(i.Fragment,{children:n?(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center p-6 bg-background border w-full h-full min-h-screen",children:[(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4",children:[(()=>{switch(l){case"spinner":return(0,i.jsx)("div",{className:(0,a.cn)("relative animate-spin rounded-full border-4 border-primary/30 border-t-primary",d[t],r)});case"pulse":return(0,i.jsxs)("div",{className:(0,a.cn)("relative flex items-center justify-center",d[t],r),children:[(0,i.jsx)("div",{className:"absolute w-full h-full rounded-full bg-primary/20 animate-ping"}),(0,i.jsx)("div",{className:"absolute w-3/4 h-3/4 rounded-full bg-primary/40 animate-pulse"}),(0,i.jsx)("div",{className:"w-1/2 h-1/2 rounded-full bg-primary"})]});case"dots":return(0,i.jsx)("div",{className:(0,a.cn)("flex space-x-2",r),children:[0,1,2].map(e=>(0,i.jsx)("div",{className:(0,a.cn)("rounded-full bg-primary","sm"===t?"w-2 h-2":"md"===t?"w-3 h-3":"w-4 h-4","animate-bounce",0===e?"animate-delay-0":1===e?"animate-delay-150":"animate-delay-300")},e))});default:return null}})(),s&&(0,i.jsx)("p",{className:"text-foreground/80 animate-pulse text-sm md:text-base",children:s})]}),(0,i.jsx)("span",{className:"mt-4 font-medium",children:"Loading..."})]}):c})}},3476:(e,t,s)=>{"use strict";s.d(t,{$y:()=>n,J0:()=>l,LT:()=>r,r4:()=>a});var i=s(5263);let a=async()=>{let{data:e,error:t}=await i.S.from("activities").select("*");if(t&&console.log(t),!e)throw Error("Could not fetch Activies");return JSON.parse(JSON.stringify(e))},r=async e=>{let{id:t,...s}=e,{error:a}=await i.S.from("activities").insert(s);return a?(console.log(a),{error:a}):{error:null}},l=async e=>{let{id:t,...s}=e,{error:a}=await i.S.from("activities").update(s).eq("id",e.id);return a&&console.log(a),a},n=async e=>await i.S.from("activities").delete().eq("id",e)},4284:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/components/ActivitiesEditor",function(){return s(993)}])},7041:(e,t,s)=>{"use strict";s.d(t,{$:()=>d,r:()=>c});var i=s(7876),a=s(4232),r=s(2987),l=s(9518),n=s(4317);let c=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:s,variant:a,size:l,asChild:d=!1,...o}=e,u=d?r.DX:"button";return(0,i.jsx)(u,{className:(0,n.cn)(c({variant:a,size:l,className:s})),ref:t,...o})});d.displayName="Button"}},e=>{var t=t=>e(e.s=t);e.O(0,[352,361,466,875,546,314,896,425,636,593,792],()=>t(4284)),_N_E=e.O()}]);