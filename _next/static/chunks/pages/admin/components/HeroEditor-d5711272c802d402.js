(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4400],{2436:(e,a,t)=>{"use strict";t.d(a,{a:()=>r});var i=t(7876);t(4232);var s=t(3951);let r=e=>{let{size:a="md",text:t,className:r,variant:n="spinner",isLoading:l,children:c}=e,o={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16"};return(0,i.jsx)(i.Fragment,{children:l?(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center p-6 bg-background border w-full h-full min-h-screen",children:[(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4",children:[(()=>{switch(n){case"spinner":return(0,i.jsx)("div",{className:(0,s.cn)("relative animate-spin rounded-full border-4 border-primary/30 border-t-primary",o[a],r)});case"pulse":return(0,i.jsxs)("div",{className:(0,s.cn)("relative flex items-center justify-center",o[a],r),children:[(0,i.jsx)("div",{className:"absolute w-full h-full rounded-full bg-primary/20 animate-ping"}),(0,i.jsx)("div",{className:"absolute w-3/4 h-3/4 rounded-full bg-primary/40 animate-pulse"}),(0,i.jsx)("div",{className:"w-1/2 h-1/2 rounded-full bg-primary"})]});case"dots":return(0,i.jsx)("div",{className:(0,s.cn)("flex space-x-2",r),children:[0,1,2].map(e=>(0,i.jsx)("div",{className:(0,s.cn)("rounded-full bg-primary","sm"===a?"w-2 h-2":"md"===a?"w-3 h-3":"w-4 h-4","animate-bounce",0===e?"animate-delay-0":1===e?"animate-delay-150":"animate-delay-300")},e))});default:return null}})(),t&&(0,i.jsx)("p",{className:"text-foreground/80 animate-pulse text-sm md:text-base",children:t})]}),(0,i.jsx)("span",{className:"mt-4 font-medium",children:"Loading..."})]}):c})}},5495:(e,a,t)=>{"use strict";t.d(a,{Se:()=>o,V6:()=>l,VM:()=>g,jW:()=>d,ts:()=>n,vS:()=>c,xp:()=>u});var i=t(3951),s=t(5263);let r=async e=>{let{data:a,error:t}=await s.S.storage.from("media").list(e);return t?(console.log(t),[]):null==a?void 0:a.map(e=>e.name)},n=async e=>{let a=await r(e),t=[];for(let i=0;i<a.length;i++){let{data:r}=s.S.storage.from("media").getPublicUrl("".concat(e,"/").concat(a[i]));t.push(r.publicUrl)}return t},l=async(e,a,t)=>{let r=a.split(".")[a.split(".").length-1],n="image/".concat(r),l=t.replace(/^data:image\/\w+;base64,/,""),c=(0,i.i)(l,n),o="".concat(e,"/").concat(a),{data:d,error:m}=await s.S.storage.from("media").upload(o,c,{contentType:n,upsert:!0});return m&&console.log(m),d},c=async e=>{let{data:a,error:t}=await s.S.storage.from("media").remove(e);if(t){console.log(t);return}return a},o=async(e,a)=>{let{data:t,error:i}=await s.S.storage.from("media").download("markdown/".concat(a,"/").concat(e.split(".")[0],"/").concat(e));return i?(console.log(i),null):await t.text()},d=async(e,a,t)=>{let r="text/markdown",n=new File([(0,i.OO)(t)],e,{type:r});await s.S.storage.from("media").upload("markdown/".concat(a,"/").concat(e.split(".")[0],"/").concat(e),n,{contentType:r,upsert:!0})},m=async e=>{let a=[],{data:t,error:i}=await s.S.storage.from("media").list(e,{limit:1e3});if(i)return console.error("Error listing files:",i),[];for(let i of t){var r;if(i.name&&(null===(r=i.metadata)||void 0===r?void 0:r.mimetype)!=="inode/directory"&&a.push("".concat(e?e+"/":"").concat(i.name)),i.name&&null===i.metadata){let t="".concat(e?e+"/":"").concat(i.name),s=await m(t);a.push(...s)}}return a},u=async(e,a)=>{let t=await m("markdown/".concat(a,"/").concat(e));if(t.length>0){let{data:e,error:a}=await s.S.storage.from("media").remove(t);if(a){console.log(a);return}return e}throw Error('No files in the folder "markdown/'.concat(a,"/").concat(e,'"'))},g=async(e,a)=>{let{data:t,error:i}=await s.S.storage.from("media").remove(["markdown/".concat(a,"/").concat(e.split(".")[0],"/").concat(e)]);if(i){console.log(i);return}return t}},5806:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>v});var i=t(7876),s=t(4232),r=t(7041),n=t(4587),l=t.n(n),c=t(53),o=t(4725),d=t(1354),m=t(345),u=t(5495),g=t(2436),p=t(6461),h=t(3125),f=t(3410);let w={heading:"",description:""},x={image1:"",image2:"",image3:""},v=()=>{let[e,a]=(0,s.useState)(!0),[t,n]=(0,s.useState)(w),[v,y]=(0,s.useState)([]),[j,N]=(0,s.useState)(x),[b,S]=(0,s.useState)(""),[k,E]=(0,s.useState)(""),[_,C]=(0,s.useState)("");(0,s.useEffect)(()=>{(async()=>{let e=await (0,u.ts)("hero");n(await (0,p.z)()),y(e),a(!1)})()},[]);let{toast:A}=(0,o.dj)(),F=async e=>{let a=0;for(let[e,t]of Object.entries(j))t&&a++;let t=(await (0,u.ts)(e)).map(e=>e.split("/").pop());for(let i=0;i<a;i++)await (0,u.vS)(["".concat(e,"/").concat(t[i])]);j.image1&&await (0,u.V6)(e,b,j.image1),j.image2&&await (0,u.V6)(e,k,j.image2),j.image3&&await (0,u.V6)(e,_,j.image3),A({title:"Success",description:"Uploaded all the images successfully"})},T=async()=>{let e=await (0,p.z)();if(e.heading==t.heading&&e.description==t.description&&""==b&&""==k&&""==_){A({title:"Error",description:"Please make some changes",variant:"destructive"});return}await F("hero");let a=await (0,p.a)(t);if(a){A({title:"Error",description:a.message,variant:"destructive"});return}A({title:"Success",description:"Hero data updated successfully"}),location.reload()},z=e=>{};return(0,i.jsx)(g.a,{isLoading:e,children:(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsx)(f.A,{id:"heading",title:"Heading",htmlFor:"heading",onChange:n,placeholder:"Enter Heading",type:"TEXT",value:t.heading}),(0,i.jsx)(f.A,{id:"description",title:"Description",htmlFor:"description",onChange:n,placeholder:"Enter Description",type:"TEXT",value:t.description}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)(c.J,{children:"Background Images"}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:h-[260px] h-[1000px]",children:v.map((e,a)=>(0,i.jsxs)("div",{className:"relative group",children:[(0,i.jsx)("div",{className:"relative w-full h-full",children:(0,i.jsx)(l(),{src:e,alt:"Background ".concat(a+1),fill:!0,className:"object-contain"})}),(0,i.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded-md",children:(0,i.jsxs)(r.$,{variant:"destructive",size:"sm",onClick:()=>z(a),children:[(0,i.jsx)(d.A,{className:"h-4 w-4 mr-1"})," Remove"]})})]},a))}),(0,i.jsxs)("div",{className:"grid gap-2 grid-cols-1 md:grid-cols-3",children:[(0,i.jsx)(h.A,{id:"image1",onChange:N,setFileName:S}),(0,i.jsx)(h.A,{id:"image2",onChange:N,setFileName:E}),(0,i.jsx)(h.A,{id:"image3",onChange:N,setFileName:C})]})]}),(0,i.jsxs)(r.$,{onClick:T,className:"mt-6 w-full",size:"lg",children:[(0,i.jsx)(m.A,{className:"h-4 w-4 mr-2"})," Save Changes"]})]})})}},6461:(e,a,t)=>{"use strict";t.d(a,{a:()=>r,z:()=>s});var i=t(5263);let s=async()=>{let{data:e,error:a}=await i.S.from("hero").select("*").eq("id","e32e2ff0-8a37-4b44-aded-db033dc95333");if(a&&console.log(a),!e)throw Error("Could not fetch data for hero section");return{heading:e[0].heading,description:e[0].description}},r=async e=>{let{error:a}=await i.S.from("hero").update(e).eq("id","e32e2ff0-8a37-4b44-aded-db033dc95333");return a?(console.log(a),a):null}},7700:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/components/HeroEditor",function(){return t(5806)}])}},e=>{var a=a=>e(e.s=a);e.O(0,[5352,6361,1875,9546,3564,8203,2669,3410,636,6593,8792],()=>a(7700)),_N_E=e.O()}]);