"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[881],{2436:(e,s,t)=>{t.d(s,{a:()=>i});var l=t(7876);t(4232);var a=t(4670);let i=e=>{let{size:s="md",text:t,className:i,variant:n="spinner",isLoading:r,children:c}=e,d={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16"};return(0,l.jsx)(l.Fragment,{children:r?(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center p-6 bg-background border w-full h-full min-h-screen",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4",children:[(()=>{switch(n){case"spinner":return(0,l.jsx)("div",{className:(0,a.cn)("relative animate-spin rounded-full border-4 border-primary/30 border-t-primary",d[s],i)});case"pulse":return(0,l.jsxs)("div",{className:(0,a.cn)("relative flex items-center justify-center",d[s],i),children:[(0,l.jsx)("div",{className:"absolute w-full h-full rounded-full bg-primary/20 animate-ping"}),(0,l.jsx)("div",{className:"absolute w-3/4 h-3/4 rounded-full bg-primary/40 animate-pulse"}),(0,l.jsx)("div",{className:"w-1/2 h-1/2 rounded-full bg-primary"})]});case"dots":return(0,l.jsx)("div",{className:(0,a.cn)("flex space-x-2",i),children:[0,1,2].map(e=>(0,l.jsx)("div",{className:(0,a.cn)("rounded-full bg-primary","sm"===s?"w-2 h-2":"md"===s?"w-3 h-3":"w-4 h-4","animate-bounce",0===e?"animate-delay-0":1===e?"animate-delay-150":"animate-delay-300")},e))});default:return null}})(),t&&(0,l.jsx)("p",{className:"text-foreground/80 animate-pulse text-sm md:text-base",children:t})]}),(0,l.jsx)("span",{className:"mt-4 font-medium",children:"Loading..."})]}):c})}},5881:(e,s,t)=>{t.r(s),t.d(s,{default:()=>T});var l=t(7876),a=t(4232),i=t(7041),n=t(457),r=t(4725),c=t(345),d=t(5104),o=t(3654),u=t(3022),m=t(1354),h=t(727),x=t(9720),v=t(2436),p=t(6324),f=t(3410),j=t(4670),N=t(710),g=t(53),y=t(8971),w=t(2588),S=t(1575),C=t(822);let b=e=>{var s,t,n;let{value:r,onChange:c,interval:d=1,className:o,isEndTime:u=!1,startTime:m=null}=e,[h,x]=(0,a.useState)(null!==(s=null==r?void 0:r.hours)&&void 0!==s?s:12),[v,p]=(0,a.useState)(null!==(t=null==r?void 0:r.minutes)&&void 0!==t?t:0),[f,N]=(0,a.useState)(null!==(n=null==r?void 0:r.period)&&void 0!==n?n:"AM"),[g,w]=(0,a.useState)(!1),[b,A]=(0,a.useState)(!1),E=(0,a.useRef)(null),k=(0,a.useRef)(null);(0,a.useEffect)(()=>{r&&(x(r.hours),p(r.minutes),N(r.period))},[r]),(0,a.useEffect)(()=>{let e={hours:h,minutes:v,period:f};if(u&&m&&!(0,j.Ge)(m,e)){let e=(0,j.Vw)(m,d);x(e.hours),p(e.minutes),N(e.period),c(e);return}c(e)},[h,v,f,c,u,m,d]);let T=(e,s)=>!(0,j.Ge)(s,e),D=()=>{x(e=>{let s=12===e?1:e+1;if(u&&m&&T({hours:s,minutes:v,period:f},m)){let e=(0,j.Vw)(m,d);return p(e.minutes),N(e.period),e.hours}return s})},M=()=>{x(e=>{let s=1===e?12:e-1;return u&&m&&T({hours:s,minutes:v,period:f},m)?e:s})};return(0,l.jsxs)("div",{className:(0,j.cn)("p-3 flex items-center space-x-3",o),children:[(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)(i.$,{variant:"ghost",size:"icon",onClick:D,children:(0,l.jsx)(S.A,{className:"h-4 w-4"})}),(0,l.jsx)("div",{className:"w-10 h-10 flex items-center justify-center font-mono text-lg",onClick:()=>{w(!0),setTimeout(()=>{var e;return null===(e=E.current)||void 0===e?void 0:e.focus()},0)},children:g?(0,l.jsx)(y.p,{ref:E,type:"text",value:12===h&&"AM"===f?"0":h.toString(),onChange:e=>{let s=e.target.value;if(""===s){x(0);return}let t=parseInt(s,10);if(!isNaN(t)&&t>=0&&t<=12){if(u&&m&&T({hours:0===t?12:t,minutes:v,period:f},m))return;x(0===t?12:t)}},onBlur:()=>{w(!1),0===h&&x(12)},className:"w-10 h-8 p-0 text-center font-mono text-lg",autoFocus:!0}):h.toString().padStart(2,"0")}),(0,l.jsx)(i.$,{variant:"ghost",size:"icon",onClick:M,children:(0,l.jsx)(C.A,{className:"h-4 w-4"})})]}),(0,l.jsx)("div",{className:"text-lg",children:":"}),(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)(i.$,{variant:"ghost",size:"icon",onClick:()=>{let e=(v+d)%60;0===e&&v>0&&D(),p(e)},children:(0,l.jsx)(S.A,{className:"h-4 w-4"})}),(0,l.jsx)("div",{className:"w-10 h-10 flex items-center justify-center font-mono text-lg",onClick:()=>{A(!0),setTimeout(()=>{var e;return null===(e=k.current)||void 0===e?void 0:e.focus()},0)},children:b?(0,l.jsx)(y.p,{ref:k,type:"text",value:v.toString(),onChange:e=>{let s=e.target.value;if(""===s){p(0);return}let t=parseInt(s,10);if(!isNaN(t)&&t>=0&&t<60){if(u&&m&&T({hours:h,minutes:t,period:f},m))return;p(t)}},onBlur:()=>{A(!1)},className:"w-10 h-8 p-0 text-center font-mono text-lg",autoFocus:!0}):v.toString().padStart(2,"0")}),(0,l.jsx)(i.$,{variant:"ghost",size:"icon",onClick:()=>{if(u&&m){let e=0===v?60-d:v-d;if(T({hours:0===v?1===h?12:h-1:h,minutes:e,period:f},m))return}0===v?(M(),p(60-d)):p(v-d<0?60-d:v-d)},children:(0,l.jsx)(C.A,{className:"h-4 w-4"})})]}),(0,l.jsx)(i.$,{variant:"outline",className:"w-16 h-10",onClick:()=>{N(e=>{let s="AM"===e?"PM":"AM";return u&&m&&T({hours:h,minutes:v,period:s},m)?e:s})},children:f})]})},A=e=>{let{startTime:s,endTime:t,onStartTimeChange:n,onEndTimeChange:r,error:c,disabled:d=!1,className:o}=e,[u,m]=(0,a.useState)(""),[h,x]=(0,a.useState)(""),[v,p]=(0,a.useState)(c);return(0,a.useEffect)(()=>{s&&m((0,j.Fl)(s))},[s]),(0,a.useEffect)(()=>{t&&x((0,j.Fl)(t))},[t]),(0,a.useEffect)(()=>{p(c)},[c]),(0,a.useEffect)(()=>{s&&t&&(0,j.Ge)(s,t)&&p(void 0)},[s,t]),(0,l.jsxs)("div",{className:(0,j.cn)("space-y-2",o),children:[(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,l.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,l.jsx)(g.J,{htmlFor:"start-time",children:"Start Time"}),(0,l.jsxs)("div",{className:"relative flex items-center",children:[(0,l.jsx)(y.p,{id:"start-time",value:u,onChange:e=>{let s=e.target.value;if(m(s),""===s){n(null);return}let t=(0,j.pe)(s);t&&(n(t),p(void 0))},placeholder:"e.g. 9:00 AM",disabled:d,className:(0,j.cn)("pr-10",v&&"border-destructive focus-visible:ring-destructive")}),(0,l.jsxs)(w.AM,{children:[(0,l.jsx)(w.Wv,{asChild:!0,children:(0,l.jsx)(i.$,{variant:"ghost",size:"icon",className:"absolute right-0 h-full rounded-l-none",disabled:d,children:(0,l.jsx)(N.A,{className:"h-4 w-4"})})}),(0,l.jsx)(w.hl,{className:"w-auto p-0",children:(0,l.jsx)(b,{value:s,onChange:n})})]})]})]}),(0,l.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,l.jsx)(g.J,{htmlFor:"end-time",children:"End Time"}),(0,l.jsxs)("div",{className:"relative flex items-center",children:[(0,l.jsx)(y.p,{id:"end-time",value:h,onChange:e=>{let s=e.target.value;if(x(s),""===s){r(null);return}let t=(0,j.pe)(s);t&&(r(t),p(void 0))},placeholder:"e.g. 5:00 PM",disabled:d,className:(0,j.cn)("pr-10",v&&"border-destructive focus-visible:ring-destructive")}),(0,l.jsxs)(w.AM,{children:[(0,l.jsx)(w.Wv,{asChild:!0,children:(0,l.jsx)(i.$,{variant:"ghost",size:"icon",className:"absolute right-0 h-full rounded-l-none",disabled:d,children:(0,l.jsx)(N.A,{className:"h-4 w-4"})})}),(0,l.jsx)(w.hl,{className:"w-auto p-0",children:(0,l.jsx)(b,{value:t,onChange:r,isEndTime:!0,startTime:s})})]})]})]})]}),v&&(0,l.jsx)("p",{className:"text-sm text-destructive",children:v})]})};var E=t(8070);let k={id:"",title:"",description:"",date:"",time:"",location:"",capacity:""},T=()=>{let{toast:e}=(0,r.dj)(),[s,t]=(0,a.useState)([]),[N,g]=(0,a.useState)(k),[y,w]=(0,a.useState)(null),[S,C]=(0,a.useState)(!0),[b,T]=(0,a.useState)(void 0),[D,M]=(0,a.useState)(null),[F,$]=(0,a.useState)(null),[z,q]=(0,a.useState)(void 0);(0,a.useEffect)(()=>{D&&F&&((0,j.Ge)(D,F)?q(void 0):q("End time must be after start time"))},[D,F]),(0,a.useEffect)(()=>{let e=localStorage.getItem("eventsData");if(e)try{t(JSON.parse(e))}catch(e){console.error("Failed to parse saved events data:",e)}(async()=>{t(await (0,p.kQ)()),C(!1)})()},[]);let L=async()=>{if(!N.title||!N.description||!D||!F){e({title:"Error",description:"All fields are required",variant:"destructive"});return}let s="".concat(D.hours<10?"0"+D.hours:D.hours,":").concat(D.minutes<10?"0"+D.minutes:D.minutes," ").concat(D.period),l="".concat(F.hours<10?"0"+F.hours:F.hours,":").concat(F.minutes<10?"0"+F.minutes:F.minutes," ").concat(F.period),a=await (0,p.Ci)({...N,time:"".concat(s,"-").concat(l),date:(0,E.Yq)(b,"dd/MM/yyyy")});if(a){e({title:"Error",description:a.message,variant:"destructive"});return}e({title:"Success",description:"Event Added Successfully"}),t(e=>[...e,{...N}]),g(k)},X=async()=>{if(!y)return;if(!D||!F){console.log("No start or endtime");return}let s="".concat(D.hours<10?"0"+D.hours:D.hours,":").concat(D.minutes<10?"0"+D.minutes:D.minutes," ").concat(D.period),l="".concat(F.hours<10?"0"+F.hours:F.hours,":").concat(F.minutes<10?"0"+F.minutes:F.minutes," ").concat(F.period),a=await (0,p.qM)({...N,time:"".concat(s,"-").concat(l),date:(0,E.Yq)(b,"dd/MM/yyyy")});if(a){e({title:"Error",description:a.message,variant:"destructive"});return}e({title:"Success",description:"Event Updated Successfully"}),t(e=>e.map(e=>e.id===y?N:e)),w(null),g(k)},G=e=>{var s,t,l;g(e),w(e.id);let a=Number(e.time.split(":")[0]),i=Number(e.time.split(":")[1].slice(0,2)),n=e.time.split(" ")[1].slice(0,2),r=Number(e.time.split("-")[1].split(":")[0]),c=Number(e.time.split("-")[1].split(":")[1].slice(0,2)),d=e.time.split(" ")[2];console.log({endHours:r,endMinutes:c,endPeriod:d}),M({hours:a,minutes:i,period:n}),$({hours:r,minutes:c,period:d}),T(new Date("".concat(null===(s=e.date)||void 0===s?void 0:s.split("/")[2],"-").concat(null===(t=e.date)||void 0===t?void 0:t.split("/")[1],"-").concat(null===(l=e.date)||void 0===l?void 0:l.split("/")[0])))},I=async s=>{let l=await (0,p.SX)(s);if(204==l.status)e({title:"Success",description:"Event was deleted successfully"});else{var a;e({title:String(l.status),description:null===(a=l.error)||void 0===a?void 0:a.message,variant:"destructive"});return}t(e=>e.filter(e=>e.id!==s)),y===s&&(w(null),g(k))};return(0,l.jsx)(v.a,{isLoading:S,children:(0,l.jsxs)("div",{className:"space-y-8",children:[(0,l.jsxs)(h.Zp,{className:"p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-medium mb-4",children:y?"Edit Event":"Add New Event"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)(f.A,{htmlFor:"htmlFor",id:"title",value:N.title,onChange:g,placeholder:"Event Title",type:"TEXT",title:"Title"}),(0,l.jsx)(f.A,{htmlFor:"description",id:"description",value:N.description,onChange:g,placeholder:"Detailed Description (Markdown)",type:"MARKDOWN",title:"Description"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsx)(f.A,{htmlFor:"date",title:"Date",id:"date",value:N.date,onChange:g,placeholder:"".concat(new Date().getDate()," /").concat(new Date().getMonth(),"/").concat(new Date().getFullYear()," "),type:"DATE",date:b,setDate:T}),(0,l.jsx)("div",{className:"space-y-2",children:(0,l.jsx)(A,{startTime:D,endTime:F,onStartTimeChange:M,onEndTimeChange:$,error:z,className:"mb-4"})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsx)(f.A,{htmlFor:"location",title:"Locaton",id:"location",value:N.location,onChange:g,placeholder:"NAB L-27",type:"TEXT"}),(0,l.jsx)(f.A,{htmlFor:"capacity",title:"Capacity",id:"capacity",value:N.capacity,onChange:g,placeholder:"100",type:"TEXT"})]}),y?(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsxs)(i.$,{onClick:X,className:"flex-1",children:[(0,l.jsx)(c.A,{className:"h-4 w-4 mr-2"})," Update Event"]}),(0,l.jsx)(i.$,{variant:"destructive",onClick:()=>{w(null),g(k)},children:"Cancel"})]}):(0,l.jsxs)(i.$,{onClick:L,className:"w-full",children:[(0,l.jsx)(d.A,{className:"h-4 w-4 mr-2"})," Add Event"]})]})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("h3",{className:"text-lg font-medium",children:"Current Events"}),0===s.length?(0,l.jsx)("p",{className:"text-gray-500 italic",children:"No events added yet."}):(0,l.jsx)(n.nD,{type:"single",collapsible:!0,className:"w-full",children:s.map(e=>(0,l.jsxs)(n.As,{value:e.id,children:[(0,l.jsx)(n.$m,{children:(0,l.jsxs)("div",{className:"flex justify-between items-center w-full pr-4",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(o.A,{className:"h-4 w-4 mr-2 text-gray-500"}),(0,l.jsx)("span",{children:e.title})]}),(0,l.jsx)("span",{className:"text-sm text-gray-500 mr-4",children:e.date})]})}),(0,l.jsx)(n.ub,{children:(0,l.jsxs)("div",{className:"p-4 space-y-4",children:[(0,l.jsx)("div",{className:"flex gap-4",children:(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("p",{className:"text-sm font-medium",children:"Full Description:"}),(0,l.jsx)("div",{className:"prose prose-sm max-w-none",children:(0,l.jsx)(x.oz,{children:e.description})})]})}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium",children:"Date:"}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:e.date})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium",children:"Time:"}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:e.time})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium",children:"Location:"}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:e.location})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium",children:"Capacity:"}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:e.capacity})]})]}),(0,l.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,l.jsxs)(i.$,{size:"sm",variant:"outline",onClick:()=>G(e),children:[(0,l.jsx)(u.A,{className:"h-4 w-4 mr-1"})," Edit"]}),(0,l.jsxs)(i.$,{size:"sm",variant:"destructive",onClick:()=>I(e.id),children:[(0,l.jsx)(m.A,{className:"h-4 w-4 mr-1"})," Delete"]})]})]})})]},e.id))}),(0,l.jsxs)(i.$,{onClick:()=>{localStorage.setItem("eventsData",JSON.stringify(s)),e({title:"Changes saved",description:"Events have been updated successfully."})},className:"w-full mt-4",children:[(0,l.jsx)(c.A,{className:"h-4 w-4 mr-2"})," Save All Changes"]})]})]})})}},6324:(e,s,t)=>{t.d(s,{Ci:()=>i,SX:()=>n,kQ:()=>a,qM:()=>r});var l=t(5263);let a=async()=>{let{data:e,error:s}=await l.S.from("events").select("*");return s&&console.log(s),e},i=async e=>{let{id:s,...t}=e,{error:a}=await l.S.from("events").insert(t);return a?(console.log(a),a):null},n=async e=>await l.S.from("events").delete().eq("id",e),r=async e=>{let{id:s,...t}=e,{error:a}=await l.S.from("events").update(t).eq("id",s);return a&&console.log(a),a}}}]);