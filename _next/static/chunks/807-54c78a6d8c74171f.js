"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[807],{2436:(e,s,t)=>{t.d(s,{a:()=>i});var l=t(7876);t(4232);var a=t(4317);let i=e=>{let{size:s="md",text:t,className:i,variant:n="spinner",isLoading:r,children:c}=e,d={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16"};return(0,l.jsx)(l.Fragment,{children:r?(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center p-6 bg-background border w-full h-full min-h-screen",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4",children:[(()=>{switch(n){case"spinner":return(0,l.jsx)("div",{className:(0,a.cn)("relative animate-spin rounded-full border-4 border-primary/30 border-t-primary",d[s],i)});case"pulse":return(0,l.jsxs)("div",{className:(0,a.cn)("relative flex items-center justify-center",d[s],i),children:[(0,l.jsx)("div",{className:"absolute w-full h-full rounded-full bg-primary/20 animate-ping"}),(0,l.jsx)("div",{className:"absolute w-3/4 h-3/4 rounded-full bg-primary/40 animate-pulse"}),(0,l.jsx)("div",{className:"w-1/2 h-1/2 rounded-full bg-primary"})]});case"dots":return(0,l.jsx)("div",{className:(0,a.cn)("flex space-x-2",i),children:[0,1,2].map(e=>(0,l.jsx)("div",{className:(0,a.cn)("rounded-full bg-primary","sm"===s?"w-2 h-2":"md"===s?"w-3 h-3":"w-4 h-4","animate-bounce",0===e?"animate-delay-0":1===e?"animate-delay-150":"animate-delay-300")},e))});default:return null}})(),t&&(0,l.jsx)("p",{className:"text-foreground/80 animate-pulse text-sm md:text-base",children:t})]}),(0,l.jsx)("span",{className:"mt-4 font-medium",children:"Loading..."})]}):c})}},4807:(e,s,t)=>{t.r(s),t.d(s,{default:()=>k});var l=t(7876),a=t(4232),i=t(7041),n=t(457),r=t(4725),c=t(345),d=t(5104),o=t(3654),m=t(3022),u=t(1354),x=t(727),h=t(9720),v=t(2436),j=t(5263);let p=async()=>{let{data:e,error:s}=await j.S.from("events").select("*");return s&&console.log(s),e};var f=t(857),N=t(4317),g=t(710),y=t(53),w=t(8971),C=t(2588),b=t(1575),A=t(822);let S=e=>{var s,t,n;let{value:r,onChange:c,interval:d=1,className:o,isEndTime:m=!1,startTime:u=null}=e,[x,h]=(0,a.useState)(null!==(s=null==r?void 0:r.hours)&&void 0!==s?s:12),[v,j]=(0,a.useState)(null!==(t=null==r?void 0:r.minutes)&&void 0!==t?t:0),[p,f]=(0,a.useState)(null!==(n=null==r?void 0:r.period)&&void 0!==n?n:"AM"),[g,y]=(0,a.useState)(!1),[C,S]=(0,a.useState)(!1),E=(0,a.useRef)(null),T=(0,a.useRef)(null);(0,a.useEffect)(()=>{r&&(h(r.hours),j(r.minutes),f(r.period))},[r]),(0,a.useEffect)(()=>{let e={hours:x,minutes:v,period:p};if(m&&u&&!(0,N.Ge)(u,e)){let e=(0,N.Vw)(u,d);h(e.hours),j(e.minutes),f(e.period),c(e);return}c(e)},[x,v,p,c,m,u,d]);let k=(e,s)=>!(0,N.Ge)(s,e),D=()=>{h(e=>{let s=12===e?1:e+1;if(m&&u&&k({hours:s,minutes:v,period:p},u)){let e=(0,N.Vw)(u,d);return j(e.minutes),f(e.period),e.hours}return s})},F=()=>{h(e=>{let s=1===e?12:e-1;return m&&u&&k({hours:s,minutes:v,period:p},u)?e:s})};return(0,l.jsxs)("div",{className:(0,N.cn)("p-3 flex items-center space-x-3",o),children:[(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)(i.$,{variant:"ghost",size:"icon",onClick:D,children:(0,l.jsx)(b.A,{className:"h-4 w-4"})}),(0,l.jsx)("div",{className:"w-10 h-10 flex items-center justify-center font-mono text-lg",onClick:()=>{y(!0),setTimeout(()=>{var e;return null===(e=E.current)||void 0===e?void 0:e.focus()},0)},children:g?(0,l.jsx)(w.p,{ref:E,type:"text",value:12===x&&"AM"===p?"0":x.toString(),onChange:e=>{let s=e.target.value;if(""===s){h(0);return}let t=parseInt(s,10);if(!isNaN(t)&&t>=0&&t<=12){if(m&&u&&k({hours:0===t?12:t,minutes:v,period:p},u))return;h(0===t?12:t)}},onBlur:()=>{y(!1),0===x&&h(12)},className:"w-10 h-8 p-0 text-center font-mono text-lg",autoFocus:!0}):x.toString().padStart(2,"0")}),(0,l.jsx)(i.$,{variant:"ghost",size:"icon",onClick:F,children:(0,l.jsx)(A.A,{className:"h-4 w-4"})})]}),(0,l.jsx)("div",{className:"text-lg",children:":"}),(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)(i.$,{variant:"ghost",size:"icon",onClick:()=>{let e=(v+d)%60;0===e&&v>0&&D(),j(e)},children:(0,l.jsx)(b.A,{className:"h-4 w-4"})}),(0,l.jsx)("div",{className:"w-10 h-10 flex items-center justify-center font-mono text-lg",onClick:()=>{S(!0),setTimeout(()=>{var e;return null===(e=T.current)||void 0===e?void 0:e.focus()},0)},children:C?(0,l.jsx)(w.p,{ref:T,type:"text",value:v.toString(),onChange:e=>{let s=e.target.value;if(""===s){j(0);return}let t=parseInt(s,10);if(!isNaN(t)&&t>=0&&t<60){if(m&&u&&k({hours:x,minutes:t,period:p},u))return;j(t)}},onBlur:()=>{S(!1)},className:"w-10 h-8 p-0 text-center font-mono text-lg",autoFocus:!0}):v.toString().padStart(2,"0")}),(0,l.jsx)(i.$,{variant:"ghost",size:"icon",onClick:()=>{if(m&&u){let e=0===v?60-d:v-d;if(k({hours:0===v?1===x?12:x-1:x,minutes:e,period:p},u))return}0===v?(F(),j(60-d)):j(v-d<0?60-d:v-d)},children:(0,l.jsx)(A.A,{className:"h-4 w-4"})})]}),(0,l.jsx)(i.$,{variant:"outline",className:"w-16 h-10",onClick:()=>{f(e=>{let s="AM"===e?"PM":"AM";return m&&u&&k({hours:x,minutes:v,period:s},u)?e:s})},children:p})]})},E=e=>{let{startTime:s,endTime:t,onStartTimeChange:n,onEndTimeChange:r,error:c,disabled:d=!1,className:o}=e,[m,u]=(0,a.useState)(""),[x,h]=(0,a.useState)(""),[v,j]=(0,a.useState)(c);return(0,a.useEffect)(()=>{s&&u((0,N.Fl)(s))},[s]),(0,a.useEffect)(()=>{t&&h((0,N.Fl)(t))},[t]),(0,a.useEffect)(()=>{j(c)},[c]),(0,a.useEffect)(()=>{s&&t&&(0,N.Ge)(s,t)&&j(void 0)},[s,t]),(0,l.jsxs)("div",{className:(0,N.cn)("space-y-2",o),children:[(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,l.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,l.jsx)(y.J,{htmlFor:"start-time",children:"Start Time"}),(0,l.jsxs)("div",{className:"relative flex items-center",children:[(0,l.jsx)(w.p,{id:"start-time",value:m,onChange:e=>{let s=e.target.value;if(u(s),""===s){n(null);return}let t=(0,N.pe)(s);t&&(n(t),j(void 0))},placeholder:"e.g. 9:00 AM",disabled:d,className:(0,N.cn)("pr-10",v&&"border-destructive focus-visible:ring-destructive")}),(0,l.jsxs)(C.AM,{children:[(0,l.jsx)(C.Wv,{asChild:!0,children:(0,l.jsx)(i.$,{variant:"ghost",size:"icon",className:"absolute right-0 h-full rounded-l-none",disabled:d,children:(0,l.jsx)(g.A,{className:"h-4 w-4"})})}),(0,l.jsx)(C.hl,{className:"w-auto p-0",children:(0,l.jsx)(S,{value:s,onChange:n})})]})]})]}),(0,l.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,l.jsx)(y.J,{htmlFor:"end-time",children:"End Time"}),(0,l.jsxs)("div",{className:"relative flex items-center",children:[(0,l.jsx)(w.p,{id:"end-time",value:x,onChange:e=>{let s=e.target.value;if(h(s),""===s){r(null);return}let t=(0,N.pe)(s);t&&(r(t),j(void 0))},placeholder:"e.g. 5:00 PM",disabled:d,className:(0,N.cn)("pr-10",v&&"border-destructive focus-visible:ring-destructive")}),(0,l.jsxs)(C.AM,{children:[(0,l.jsx)(C.Wv,{asChild:!0,children:(0,l.jsx)(i.$,{variant:"ghost",size:"icon",className:"absolute right-0 h-full rounded-l-none",disabled:d,children:(0,l.jsx)(g.A,{className:"h-4 w-4"})})}),(0,l.jsx)(C.hl,{className:"w-auto p-0",children:(0,l.jsx)(S,{value:t,onChange:r,isEndTime:!0,startTime:s})})]})]})]})]}),v&&(0,l.jsx)("p",{className:"text-sm text-destructive",children:v})]})},T={id:"",title:"",description:"",date:"",time:"",location:"",capacity:""},k=()=>{let{toast:e}=(0,r.dj)(),[s,t]=(0,a.useState)([]),[j,g]=(0,a.useState)(T),[y,w]=(0,a.useState)(null),[C,b]=(0,a.useState)(!0),[A,S]=(0,a.useState)(void 0),[k,D]=(0,a.useState)(null),[F,$]=(0,a.useState)(null),[M,z]=(0,a.useState)(void 0);(0,a.useEffect)(()=>{k&&F&&((0,N.Ge)(k,F)?z(void 0):z("End time must be after start time"))},[k,F]),(0,a.useEffect)(()=>{let e=localStorage.getItem("eventsData");if(e)try{t(JSON.parse(e))}catch(e){console.error("Failed to parse saved events data:",e)}(async()=>{t(await p()),b(!1)})()},[]);let L=e=>{g(e),w(e.id)},G=e=>{t(s=>s.filter(s=>s.id!==e)),y===e&&(w(null),g(T))};return(0,l.jsx)(v.a,{isLoading:C,children:(0,l.jsxs)("div",{className:"space-y-8",children:[(0,l.jsxs)(x.Zp,{className:"p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-medium mb-4",children:y?"Edit Event":"Add New Event"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)(f.A,{htmlFor:"htmlFor",id:"title",value:j.title,onChange:g,placeholder:"Event Title",type:"TEXT",title:"Title"}),(0,l.jsx)(f.A,{htmlFor:"description",id:"description",value:j.description,onChange:g,placeholder:"Detailed Description (Markdown)",type:"MARKDOWN",title:"Description"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsx)(f.A,{htmlFor:"date",title:"Date",id:"date",value:j.date,onChange:g,placeholder:"".concat(new Date().getDate(),"/").concat(new Date().getMonth(),"/").concat(new Date().getFullYear()),type:"DATE",date:A,setDate:S}),(0,l.jsx)("div",{className:"space-y-2",children:(0,l.jsx)(E,{startTime:k,endTime:F,onStartTimeChange:D,onEndTimeChange:$,error:M,className:"mb-4"})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsx)(f.A,{htmlFor:"location",title:"Locaton",id:"location",value:j.location,onChange:g,placeholder:"NAB L-27",type:"TEXT"}),(0,l.jsx)(f.A,{htmlFor:"capacity",title:"Capacity",id:"capacity",value:j.capacity,onChange:g,placeholder:"100",type:"TEXT"})]}),y?(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsxs)(i.$,{onClick:()=>{y&&(t(e=>e.map(e=>e.id===y?j:e)),w(null),g(T))},className:"flex-1",children:[(0,l.jsx)(c.A,{className:"h-4 w-4 mr-2"})," Update Event"]}),(0,l.jsx)(i.$,{variant:"outline",onClick:()=>{w(null),g(T)},children:"Cancel"})]}):(0,l.jsxs)(i.$,{onClick:()=>{if(!j.title||!j.date){e({title:"Error",description:"Title and date are required",variant:"destructive"});return}let s=Date.now().toString();t(e=>[...e,{...j,id:s}]),g(T)},className:"w-full",children:[(0,l.jsx)(d.A,{className:"h-4 w-4 mr-2"})," Add Event"]})]})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("h3",{className:"text-lg font-medium",children:"Current Events"}),0===s.length?(0,l.jsx)("p",{className:"text-gray-500 italic",children:"No events added yet."}):(0,l.jsx)(n.nD,{type:"single",collapsible:!0,className:"w-full",children:s.map(e=>(0,l.jsxs)(n.As,{value:e.id,children:[(0,l.jsx)(n.$m,{children:(0,l.jsxs)("div",{className:"flex justify-between items-center w-full pr-4",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(o.A,{className:"h-4 w-4 mr-2 text-gray-500"}),(0,l.jsx)("span",{children:e.title})]}),(0,l.jsx)("span",{className:"text-sm text-gray-500 mr-4",children:e.date})]})}),(0,l.jsx)(n.ub,{children:(0,l.jsxs)("div",{className:"p-4 space-y-4",children:[(0,l.jsx)("div",{className:"flex gap-4",children:(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("p",{className:"text-sm font-medium",children:"Full Description:"}),(0,l.jsx)("div",{className:"prose prose-sm max-w-none",children:(0,l.jsx)(h.oz,{children:e.description})})]})}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium",children:"Date:"}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:e.date})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium",children:"Time:"}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:e.time})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium",children:"Location:"}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:e.location})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium",children:"Capacity:"}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:e.capacity})]})]}),(0,l.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,l.jsxs)(i.$,{size:"sm",variant:"outline",onClick:()=>L(e),children:[(0,l.jsx)(m.A,{className:"h-4 w-4 mr-1"})," Edit"]}),(0,l.jsxs)(i.$,{size:"sm",variant:"destructive",onClick:()=>G(e.id),children:[(0,l.jsx)(u.A,{className:"h-4 w-4 mr-1"})," Delete"]})]})]})})]},e.id))}),(0,l.jsxs)(i.$,{onClick:()=>{localStorage.setItem("eventsData",JSON.stringify(s)),e({title:"Changes saved",description:"Events have been updated successfully."})},className:"w-full mt-4",children:[(0,l.jsx)(c.A,{className:"h-4 w-4 mr-2"})," Save All Changes"]})]})]})})}}}]);