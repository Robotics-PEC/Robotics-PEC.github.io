"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8244],{2832:(e,t,s)=>{s.d(t,{G6:()=>o,JQ:()=>r,nz:()=>n,vr:()=>p,xx:()=>d});var i=s(5263),a=s(5495),l=s(3951),c=s(5668);let r=async()=>{let{data:e,error:t}=await i.S.from("projects").select("*");if(t&&console.log(t),!e)throw Error("Could not fetch Projects");return JSON.parse(JSON.stringify(e))},o=async e=>{let{data:t,error:s}=await i.S.from("projects").select().eq("id",e);if(s&&console.log(s),!t)throw Error("Project with this id doesn't exist");return JSON.parse(JSON.stringify(t[0]))},n=async(e,t)=>{await (0,a.V6)("projects",t,e.image);let{data:s}=i.S.storage.from("media").getPublicUrl("projects/".concat(t)),{id:l,...c}=e,{error:r}=await i.S.from("projects").insert({...c,image:s.publicUrl});return r?(console.log(r),{error:r}):{error:null}},d=async e=>(await (0,a.vS)(["projects/".concat(e.image.split("/").pop())]),await i.S.from("projects").delete().eq("id",e.id)),p=async(e,t)=>{let s=await o(e.id);await (0,a.vS)(["projects/".concat(s.image.split("/").pop())]);let{id:r,...n}=e;if(!await (0,a.V6)("projects",t,e.image))return new c.kf({message:"Image upload fail",details:"",hint:"",code:""});let{data:d}=i.S.storage.from("media").getPublicUrl("projects/".concat(t)),{error:p}=await i.S.from("projects").update({...n,image:d.publicUrl}).eq("id",e.id);if(p){let e=await (0,l.W6)(s.image);await (0,a.V6)("projects",s.image.split("/").pop(),e),console.log(p)}return p}},8244:(e,t,s)=>{s.r(t),s.d(t,{default:()=>f});var i=s(7876),a=s(4232),l=s(7041),c=s(457),r=s(4725),o=s(345),n=s(5104),d=s(3022),p=s(1354),m=s(727),g=s(6991),h=s(2832),j=s(2436),u=s(3410),x=s(3951);let f=()=>{let e={id:"",title:"",description:"",image:"",longDescription:"",category:"",technologies:""},{toast:t}=(0,r.dj)(),[s,f]=(0,a.useState)([]),[v,y]=(0,a.useState)(!0),[w,N]=(0,a.useState)(""),[S,b]=(0,a.useState)(e),[C,A]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{f(await (0,h.JQ)()),y(!1)})();let e=localStorage.getItem("projectsData");if(e)try{f(JSON.parse(e))}catch(e){console.error("Failed to parse saved projects data:",e)}},[]);let D=async()=>{if(!S.title||!S.description||!S.longDescription||!S.image||!S.category||!S.technologies){t({title:"Error",description:"All fields are Required",variant:"destructive"});return}f(e=>[...e,{...S}]);let{error:s}=await (0,h.nz)(S,w);s?t({title:s.name,description:s.message,variant:"destructive"}):t({title:"Success",description:"Project has been Uploaded"}),b(e)},k=async()=>{if(!C)return;for(let e=0;e<s.length;e++)s[e].id===C&&N(s[e].image.split("/").pop());f(e=>e.map(e=>e.id===C?S:e));let i=await (0,h.vr)(S,w);S.image="https://bkbmdjdypixbskuvrkxi.supabase.co/storage/v1/object/public/media/projects/".concat(w),A(null),b(e),i?t({title:i.name,description:i.message,variant:"destructive"}):t({title:"Success",description:"Project has been Updated"})},P=async e=>{N(e.image.split("/").pop()),e.image=await (0,x.W6)(e.image),b(e),A(e.id)},E=async e=>{f(t=>t.filter(t=>t.id!==e.id)),204==(await (0,h.xx)(e)).status?t({title:"Project Deleted Successfully",description:"".concat(e.title," was successfully deleted")}):t({title:"Project Couldn't be deleted",description:"".concat(e.title," unable to be deleted")})};return(0,i.jsx)(j.a,{isLoading:v,children:(0,i.jsxs)("div",{className:"space-y-8",children:[(0,i.jsxs)(m.Zp,{className:"p-6",children:[(0,i.jsx)("h3",{className:"text-lg font-medium mb-4",children:C?"Edit Project":"Add New Project"}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)(u.A,{title:"Title",id:"title",value:S.title,onChange:b,placeholder:"Project Title",htmlFor:"title",type:"TEXT"}),(0,i.jsx)(u.A,{title:"Description",id:"description",value:S.description,onChange:b,placeholder:"Short Description",htmlFor:"description",type:"TEXT"}),(0,i.jsx)(u.A,{title:"Image",id:"image",value:S.image,onChange:b,placeholder:"Upload Image",htmlFor:"image",type:"IMAGE",setFileName:N}),(0,i.jsx)(u.A,{title:"Detailed Desription",id:"longDescription",value:S.longDescription,onChange:b,placeholder:"Write detailed project description using Markdown",htmlFor:"longDescription",type:"MARKDOWN"}),(0,i.jsx)(u.A,{title:"Category",id:"category",value:S.category,onChange:b,placeholder:"Automation",htmlFor:"category",type:"TEXT"}),(0,i.jsx)(u.A,{title:"Technologies Used (Comma Seperated)",id:"technologies",value:S.technologies,onChange:b,placeholder:"AI,Mechanical Design",htmlFor:"technologies",type:"TEXT"}),C?(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsxs)(l.$,{onClick:k,className:"flex-1",children:[(0,i.jsx)(o.A,{className:"h-4 w-4 mr-2"})," Update Project"]}),(0,i.jsx)(l.$,{variant:"destructive",onClick:()=>{A(null),b(e)},children:"Cancel"})]}):(0,i.jsxs)(l.$,{onClick:D,className:"w-full",children:[(0,i.jsx)(n.A,{className:"h-4 w-4 mr-2"})," Add Project"]})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("h3",{className:"text-lg font-medium",children:"Current Projects"}),0===s.length?(0,i.jsx)("p",{className:"text-gray-500 italic",children:"No projects added yet."}):(0,i.jsx)(c.nD,{type:"single",collapsible:!0,className:"w-full",children:s.map(e=>(0,i.jsxs)(c.As,{value:e.id,children:[(0,i.jsx)(c.$m,{children:(0,i.jsx)("div",{className:"flex justify-between items-center w-full pr-4",children:(0,i.jsx)("span",{children:e.title})})}),(0,i.jsx)(c.ub,{children:(0,i.jsxs)("div",{className:"p-4 space-y-4",children:[(0,i.jsxs)("div",{className:"flex gap-4",children:[e.image&&(0,i.jsx)("img",{src:e.image,alt:e.title,className:"w-24 h-24 object-cover rounded"}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,i.jsx)("div",{className:"prose prose-sm max-w-none",children:(0,i.jsx)(g.$,{children:(0,x.OO)(e.longDescription)})})]})]}),(0,i.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,i.jsxs)(l.$,{size:"sm",variant:"outline",onClick:()=>P(e),children:[(0,i.jsx)(d.A,{className:"h-4 w-4 mr-1"})," Edit"]}),(0,i.jsxs)(l.$,{size:"sm",variant:"destructive",onClick:()=>E(e),children:[(0,i.jsx)(p.A,{className:"h-4 w-4 mr-1"})," Delete"]})]})]})})]},e.id))}),(0,i.jsxs)(l.$,{onClick:()=>{localStorage.setItem("projectsData",JSON.stringify(s)),t({title:"Changes saved",description:"Projects have been updated successfully."})},className:"w-full mt-4",children:[(0,i.jsx)(o.A,{className:"h-4 w-4 mr-2"})," Save All Changes"]})]})]})})}}}]);