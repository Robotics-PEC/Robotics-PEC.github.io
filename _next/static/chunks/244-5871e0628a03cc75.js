"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[244],{2436:(e,t,a)=>{a.d(t,{a:()=>l});var s=a(7876);a(4232);var i=a(4317);let l=e=>{let{size:t="md",text:a,className:l,variant:r="spinner",isLoading:c,children:n}=e,o={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16"};return(0,s.jsx)(s.Fragment,{children:c?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center p-6 bg-background border w-full h-full min-h-screen",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4",children:[(()=>{switch(r){case"spinner":return(0,s.jsx)("div",{className:(0,i.cn)("relative animate-spin rounded-full border-4 border-primary/30 border-t-primary",o[t],l)});case"pulse":return(0,s.jsxs)("div",{className:(0,i.cn)("relative flex items-center justify-center",o[t],l),children:[(0,s.jsx)("div",{className:"absolute w-full h-full rounded-full bg-primary/20 animate-ping"}),(0,s.jsx)("div",{className:"absolute w-3/4 h-3/4 rounded-full bg-primary/40 animate-pulse"}),(0,s.jsx)("div",{className:"w-1/2 h-1/2 rounded-full bg-primary"})]});case"dots":return(0,s.jsx)("div",{className:(0,i.cn)("flex space-x-2",l),children:[0,1,2].map(e=>(0,s.jsx)("div",{className:(0,i.cn)("rounded-full bg-primary","sm"===t?"w-2 h-2":"md"===t?"w-3 h-3":"w-4 h-4","animate-bounce",0===e?"animate-delay-0":1===e?"animate-delay-150":"animate-delay-300")},e))});default:return null}})(),a&&(0,s.jsx)("p",{className:"text-foreground/80 animate-pulse text-sm md:text-base",children:a})]}),(0,s.jsx)("span",{className:"mt-4 font-medium",children:"Loading..."})]}):n})}},2832:(e,t,a)=>{a.d(t,{G6:()=>n,JQ:()=>c,nz:()=>o,vr:()=>m,xx:()=>d});var s=a(5263),i=a(5495),l=a(4317),r=a(5668);let c=async()=>{let{data:e,error:t}=await s.S.from("projects").select("*");if(t&&console.log(t),!e)throw Error("Could not fetch Projects");return JSON.parse(JSON.stringify(e))},n=async e=>{let{data:t,error:a}=await s.S.from("projects").select().eq("id",e);if(a&&console.log(a),!t)throw Error("Project with this id doesn't exist");return JSON.parse(JSON.stringify(t[0]))},o=async(e,t)=>{await (0,i.V6)("projects",t,e.image);let{data:a}=s.S.storage.from("media").getPublicUrl("projects/".concat(t)),{id:l,...r}=e,{error:c}=await s.S.from("projects").insert({...r,image:a.publicUrl});return c?(console.log(c),{error:c}):{error:null}},d=async e=>(await (0,i.vS)(["projects/".concat(e.image.split("/").pop())]),await s.S.from("projects").delete().eq("id",e.id)),m=async(e,t)=>{let a=await n(e.id);await (0,i.vS)(["projects/".concat(a.image.split("/").pop())]);let{id:c,...o}=e;if(!await (0,i.V6)("projects",t,e.image))return new r.kf({message:"Image upload fail",details:"",hint:"",code:""});let{data:d}=s.S.storage.from("media").getPublicUrl("projects/".concat(t)),{error:m}=await s.S.from("projects").update({...o,image:d.publicUrl}).eq("id",e.id);if(m){let e=await (0,l.W6)(a.image);await (0,i.V6)("projects",a.image.split("/").pop(),e),console.log(m)}return m}},5495:(e,t,a)=>{a.d(t,{V6:()=>c,ts:()=>r,vS:()=>n});var s=a(4317),i=a(5263);let l=async e=>{let{data:t,error:a}=await i.S.storage.from("media").list(e);return a?(console.log(a),[]):null==t?void 0:t.map(e=>e.name)},r=async e=>{let t=await l(e),a=[];for(let s=0;s<t.length;s++){let{data:l}=i.S.storage.from("media").getPublicUrl("".concat(e,"/").concat(t[s]));a.push(l.publicUrl)}return a},c=async(e,t,a)=>{let l=t.split(".")[t.split(".").length-1],r="image/".concat(l),c=a.replace(/^data:image\/\w+;base64,/,""),n=(0,s.i)(c,r),o="".concat(e,"/").concat(t),{data:d,error:m}=await i.S.storage.from("media").upload(o,n,{contentType:r,upsert:!0});return m&&console.log(m),d},n=async e=>{let{data:t,error:a}=await i.S.storage.from("media").remove(e);if(a){console.log(a);return}return t}},8244:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var s=a(7876),i=a(4232),l=a(7041),r=a(457),c=a(4725),n=a(345),o=a(5104),d=a(3022),m=a(1354),p=a(727),u=a(9720),g=a(2832),h=a(2436),j=a(3502),x=a(4317);let f=()=>{let e={id:"",title:"",description:"",image:"",longDescription:"",category:"",technologies:""},{toast:t}=(0,c.dj)(),[a,f]=(0,i.useState)([]),[v,y]=(0,i.useState)(!0),[w,N]=(0,i.useState)(""),[b,S]=(0,i.useState)(e),[C,A]=(0,i.useState)(null);(0,i.useEffect)(()=>{(async()=>{f(await (0,g.JQ)()),y(!1)})();let e=localStorage.getItem("projectsData");if(e)try{f(JSON.parse(e))}catch(e){console.error("Failed to parse saved projects data:",e)}},[]);let D=async()=>{if(!b.title||!b.description||!b.longDescription||!b.image||!b.category||!b.technologies){t({title:"Error",description:"All fields are Required",variant:"destructive"});return}f(e=>[...e,{...b}]);let{error:a}=await (0,g.nz)(b,w);a?t({title:a.name,description:a.message,variant:"destructive"}):t({title:"Success",description:"Project has been Uploaded"}),S(e)},k=async()=>{if(!C)return;for(let e=0;e<a.length;e++)a[e].id===C&&N(a[e].image.split("/").pop());f(e=>e.map(e=>e.id===C?b:e));let s=await (0,g.vr)(b,w);b.image="https://bkbmdjdypixbskuvrkxi.supabase.co/storage/v1/object/public/media/projects/".concat(w),A(null),S(e),s?t({title:s.name,description:s.message,variant:"destructive"}):t({title:"Success",description:"Project has been Updated"})},P=async e=>{N(e.image.split("/").pop()),e.image=await (0,x.W6)(e.image),S(e),A(e.id)},E=async e=>{f(t=>t.filter(t=>t.id!==e.id)),204==(await (0,g.xx)(e)).status?t({title:"Project Deleted Successfully",description:"".concat(e.title," was successfully deleted")}):t({title:"Project Couldn't be deleted",description:"".concat(e.title," unable to be deleted")})};return(0,s.jsx)(h.a,{isLoading:v,children:(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)(p.Zp,{className:"p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium mb-4",children:C?"Edit Project":"Add New Project"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(j.A,{title:"Title",id:"title",value:b.title,onChange:S,placeholder:"Project Title",htmlFor:"title",type:"TEXT"}),(0,s.jsx)(j.A,{title:"Description",id:"description",value:b.description,onChange:S,placeholder:"Short Description",htmlFor:"description",type:"TEXT"}),(0,s.jsx)(j.A,{title:"Image",id:"image",value:b.image,onChange:S,placeholder:"Upload Image",htmlFor:"image",type:"IMAGE",setFileName:N}),(0,s.jsx)(j.A,{title:"Detailed Desription",id:"longDescription",value:b.longDescription,onChange:S,placeholder:"Write detailed project description using Markdown",htmlFor:"longDescription",type:"MARKDOWN"}),(0,s.jsx)(j.A,{title:"Category",id:"category",value:b.category,onChange:S,placeholder:"Automation",htmlFor:"category",type:"TEXT"}),(0,s.jsx)(j.A,{title:"Technologies Used (Comma Seperated)",id:"technologies",value:b.technologies,onChange:S,placeholder:"AI,Mechanical Design",htmlFor:"technologies",type:"TEXT"}),C?(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(l.$,{onClick:k,className:"flex-1",children:[(0,s.jsx)(n.A,{className:"h-4 w-4 mr-2"})," Update Project"]}),(0,s.jsx)(l.$,{variant:"destructive",onClick:()=>{A(null),S(e)},children:"Cancel"})]}):(0,s.jsxs)(l.$,{onClick:D,className:"w-full",children:[(0,s.jsx)(o.A,{className:"h-4 w-4 mr-2"})," Add Project"]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-medium",children:"Current Projects"}),0===a.length?(0,s.jsx)("p",{className:"text-gray-500 italic",children:"No projects added yet."}):(0,s.jsx)(r.nD,{type:"single",collapsible:!0,className:"w-full",children:a.map(e=>(0,s.jsxs)(r.As,{value:e.id,children:[(0,s.jsx)(r.$m,{children:(0,s.jsx)("div",{className:"flex justify-between items-center w-full pr-4",children:(0,s.jsx)("span",{children:e.title})})}),(0,s.jsx)(r.ub,{children:(0,s.jsxs)("div",{className:"p-4 space-y-4",children:[(0,s.jsxs)("div",{className:"flex gap-4",children:[e.image&&(0,s.jsx)("img",{src:e.image,alt:e.title,className:"w-24 h-24 object-cover rounded"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,s.jsx)("div",{className:"prose prose-sm max-w-none",children:(0,s.jsx)(u.oz,{children:e.longDescription})})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,s.jsxs)(l.$,{size:"sm",variant:"outline",onClick:()=>P(e),children:[(0,s.jsx)(d.A,{className:"h-4 w-4 mr-1"})," Edit"]}),(0,s.jsxs)(l.$,{size:"sm",variant:"destructive",onClick:()=>E(e),children:[(0,s.jsx)(m.A,{className:"h-4 w-4 mr-1"})," Delete"]})]})]})})]},e.id))}),(0,s.jsxs)(l.$,{onClick:()=>{localStorage.setItem("projectsData",JSON.stringify(a)),t({title:"Changes saved",description:"Projects have been updated successfully."})},className:"w-full mt-4",children:[(0,s.jsx)(n.A,{className:"h-4 w-4 mr-2"})," Save All Changes"]})]})]})})}}}]);