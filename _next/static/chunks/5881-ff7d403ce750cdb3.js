"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5881],{457:(e,s,t)=>{t.d(s,{$m:()=>o,As:()=>d,nD:()=>c,ub:()=>m});var a=t(7876),l=t(4232),i=t(8221),n=t(822),r=t(612);let c=i.bL,d=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(i.q7,{ref:s,className:(0,r.cn)("border-b",t),...l})});d.displayName="AccordionItem";let o=l.forwardRef((e,s)=>{let{className:t,children:l,...c}=e;return(0,a.jsx)(i.Y9,{className:"flex",children:(0,a.jsxs)(i.l9,{ref:s,className:(0,r.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...c,children:[l,(0,a.jsx)(n.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});o.displayName=i.l9.displayName;let m=l.forwardRef((e,s)=>{let{className:t,children:l,...n}=e;return(0,a.jsx)(i.UC,{ref:s,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:(0,a.jsx)("div",{className:(0,r.cn)("pb-4 pt-0",t),children:l})})});m.displayName=i.UC.displayName},2436:(e,s,t)=>{t.d(s,{a:()=>i});var a=t(7876);t(4232);var l=t(612);let i=e=>{let{size:s="md",text:t,className:i,variant:n="spinner",isLoading:r,children:c}=e,d={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16"};return(0,a.jsx)(a.Fragment,{children:r?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center p-6 bg-background border w-full h-full min-h-screen",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4",children:[(()=>{switch(n){case"spinner":return(0,a.jsx)("div",{className:(0,l.cn)("relative animate-spin rounded-full border-4 border-primary/30 border-t-primary",d[s],i)});case"pulse":return(0,a.jsxs)("div",{className:(0,l.cn)("relative flex items-center justify-center",d[s],i),children:[(0,a.jsx)("div",{className:"absolute w-full h-full rounded-full bg-primary/20 animate-ping"}),(0,a.jsx)("div",{className:"absolute w-3/4 h-3/4 rounded-full bg-primary/40 animate-pulse"}),(0,a.jsx)("div",{className:"w-1/2 h-1/2 rounded-full bg-primary"})]});case"dots":return(0,a.jsx)("div",{className:(0,l.cn)("flex space-x-2",i),children:[0,1,2].map(e=>(0,a.jsx)("div",{className:(0,l.cn)("rounded-full bg-primary","sm"===s?"w-2 h-2":"md"===s?"w-3 h-3":"w-4 h-4","animate-bounce",0===e?"animate-delay-0":1===e?"animate-delay-150":"animate-delay-300")},e))});default:return null}})(),t&&(0,a.jsx)("p",{className:"text-foreground/80 animate-pulse text-sm md:text-base",children:t})]}),(0,a.jsx)("span",{className:"mt-4 font-medium",children:"Loading..."})]}):c})}},5881:(e,s,t)=>{t.r(s),t.d(s,{default:()=>T});var a=t(7876),l=t(4232),i=t(7041),n=t(457),r=t(4725),c=t(345),d=t(5104),o=t(3654),m=t(3022),u=t(1354),h=t(727),x=t(6991),p=t(2436),v=t(6324),f=t(3410),j=t(612),N=t(710),g=t(53),y=t(8971),w=t(2588),b=t(1575),S=t(822);let C=e=>{var s,t,n;let{value:r,onChange:c,interval:d=1,className:o,isEndTime:m=!1,startTime:u=null}=e,[h,x]=(0,l.useState)(null!==(s=null==r?void 0:r.hours)&&void 0!==s?s:12),[p,v]=(0,l.useState)(null!==(t=null==r?void 0:r.minutes)&&void 0!==t?t:0),[f,N]=(0,l.useState)(null!==(n=null==r?void 0:r.period)&&void 0!==n?n:"AM"),[g,w]=(0,l.useState)(!1),[C,A]=(0,l.useState)(!1),E=(0,l.useRef)(null),k=(0,l.useRef)(null);(0,l.useEffect)(()=>{r&&(x(r.hours),v(r.minutes),N(r.period))},[r]),(0,l.useEffect)(()=>{let e={hours:h,minutes:p,period:f};if(m&&u&&!(0,j.Ge)(u,e)){let e=(0,j.Vw)(u,d);x(e.hours),v(e.minutes),N(e.period),c(e);return}c(e)},[h,p,f,c,m,u,d]);let T=(e,s)=>!(0,j.Ge)(s,e),D=()=>{x(e=>{let s=12===e?1:e+1;if(m&&u&&T({hours:s,minutes:p,period:f},u)){let e=(0,j.Vw)(u,d);return v(e.minutes),N(e.period),e.hours}return s})},M=()=>{x(e=>{let s=1===e?12:e-1;return m&&u&&T({hours:s,minutes:p,period:f},u)?e:s})};return(0,a.jsxs)("div",{className:(0,j.cn)("p-3 flex items-center space-x-3",o),children:[(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)(i.$,{variant:"ghost",size:"icon",onClick:D,children:(0,a.jsx)(b.A,{className:"h-4 w-4"})}),(0,a.jsx)("div",{className:"w-10 h-10 flex items-center justify-center font-mono text-lg",onClick:()=>{w(!0),setTimeout(()=>{var e;return null===(e=E.current)||void 0===e?void 0:e.focus()},0)},children:g?(0,a.jsx)(y.p,{ref:E,type:"text",value:12===h&&"AM"===f?"0":h.toString(),onChange:e=>{let s=e.target.value;if(""===s){x(0);return}let t=parseInt(s,10);if(!isNaN(t)&&t>=0&&t<=12){if(m&&u&&T({hours:0===t?12:t,minutes:p,period:f},u))return;x(0===t?12:t)}},onBlur:()=>{w(!1),0===h&&x(12)},className:"w-10 h-8 p-0 text-center font-mono text-lg",autoFocus:!0}):h.toString().padStart(2,"0")}),(0,a.jsx)(i.$,{variant:"ghost",size:"icon",onClick:M,children:(0,a.jsx)(S.A,{className:"h-4 w-4"})})]}),(0,a.jsx)("div",{className:"text-lg",children:":"}),(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)(i.$,{variant:"ghost",size:"icon",onClick:()=>{let e=(p+d)%60;0===e&&p>0&&D(),v(e)},children:(0,a.jsx)(b.A,{className:"h-4 w-4"})}),(0,a.jsx)("div",{className:"w-10 h-10 flex items-center justify-center font-mono text-lg",onClick:()=>{A(!0),setTimeout(()=>{var e;return null===(e=k.current)||void 0===e?void 0:e.focus()},0)},children:C?(0,a.jsx)(y.p,{ref:k,type:"text",value:p.toString(),onChange:e=>{let s=e.target.value;if(""===s){v(0);return}let t=parseInt(s,10);if(!isNaN(t)&&t>=0&&t<60){if(m&&u&&T({hours:h,minutes:t,period:f},u))return;v(t)}},onBlur:()=>{A(!1)},className:"w-10 h-8 p-0 text-center font-mono text-lg",autoFocus:!0}):p.toString().padStart(2,"0")}),(0,a.jsx)(i.$,{variant:"ghost",size:"icon",onClick:()=>{if(m&&u){let e=0===p?60-d:p-d;if(T({hours:0===p?1===h?12:h-1:h,minutes:e,period:f},u))return}0===p?(M(),v(60-d)):v(p-d<0?60-d:p-d)},children:(0,a.jsx)(S.A,{className:"h-4 w-4"})})]}),(0,a.jsx)(i.$,{variant:"outline",className:"w-16 h-10",onClick:()=>{N(e=>{let s="AM"===e?"PM":"AM";return m&&u&&T({hours:h,minutes:p,period:s},u)?e:s})},children:f})]})},A=e=>{let{startTime:s,endTime:t,onStartTimeChange:n,onEndTimeChange:r,error:c,disabled:d=!1,className:o}=e,[m,u]=(0,l.useState)(""),[h,x]=(0,l.useState)(""),[p,v]=(0,l.useState)(c);return(0,l.useEffect)(()=>{s&&u((0,j.Fl)(s))},[s]),(0,l.useEffect)(()=>{t&&x((0,j.Fl)(t))},[t]),(0,l.useEffect)(()=>{v(c)},[c]),(0,l.useEffect)(()=>{s&&t&&(0,j.Ge)(s,t)&&v(void 0)},[s,t]),(0,a.jsxs)("div",{className:(0,j.cn)("space-y-2",o),children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,a.jsx)(g.J,{htmlFor:"start-time",children:"Start Time"}),(0,a.jsxs)("div",{className:"relative flex items-center",children:[(0,a.jsx)(y.p,{id:"start-time",value:m,onChange:e=>{let s=e.target.value;if(u(s),""===s){n(null);return}let t=(0,j.pe)(s);t&&(n(t),v(void 0))},placeholder:"e.g. 9:00 AM",disabled:d,className:(0,j.cn)("pr-10",p&&"border-destructive focus-visible:ring-destructive")}),(0,a.jsxs)(w.AM,{children:[(0,a.jsx)(w.Wv,{asChild:!0,children:(0,a.jsx)(i.$,{variant:"ghost",size:"icon",className:"absolute right-0 h-full rounded-l-none",disabled:d,children:(0,a.jsx)(N.A,{className:"h-4 w-4"})})}),(0,a.jsx)(w.hl,{className:"w-auto p-0",children:(0,a.jsx)(C,{value:s,onChange:n})})]})]})]}),(0,a.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,a.jsx)(g.J,{htmlFor:"end-time",children:"End Time"}),(0,a.jsxs)("div",{className:"relative flex items-center",children:[(0,a.jsx)(y.p,{id:"end-time",value:h,onChange:e=>{let s=e.target.value;if(x(s),""===s){r(null);return}let t=(0,j.pe)(s);t&&(r(t),v(void 0))},placeholder:"e.g. 5:00 PM",disabled:d,className:(0,j.cn)("pr-10",p&&"border-destructive focus-visible:ring-destructive")}),(0,a.jsxs)(w.AM,{children:[(0,a.jsx)(w.Wv,{asChild:!0,children:(0,a.jsx)(i.$,{variant:"ghost",size:"icon",className:"absolute right-0 h-full rounded-l-none",disabled:d,children:(0,a.jsx)(N.A,{className:"h-4 w-4"})})}),(0,a.jsx)(w.hl,{className:"w-auto p-0",children:(0,a.jsx)(C,{value:t,onChange:r,isEndTime:!0,startTime:s})})]})]})]})]}),p&&(0,a.jsx)("p",{className:"text-sm text-destructive",children:p})]})};var E=t(8070);let k={id:"",title:"",description:"",date:"",time:"",location:"",capacity:""},T=()=>{let{toast:e}=(0,r.dj)(),[s,t]=(0,l.useState)([]),[N,g]=(0,l.useState)(k),[y,w]=(0,l.useState)(null),[b,S]=(0,l.useState)(!0),[C,T]=(0,l.useState)(void 0),[D,M]=(0,l.useState)(null),[F,$]=(0,l.useState)(null),[q,z]=(0,l.useState)(void 0);(0,l.useEffect)(()=>{D&&F&&((0,j.Ge)(D,F)?z(void 0):z("End time must be after start time"))},[D,F]),(0,l.useEffect)(()=>{let e=localStorage.getItem("eventsData");if(e)try{t(JSON.parse(e))}catch(e){console.error("Failed to parse saved events data:",e)}(async()=>{t(await (0,v.kQ)()),S(!1)})()},[]);let L=async()=>{if(!N.title||!N.description||!D||!F){e({title:"Error",description:"All fields are required",variant:"destructive"});return}let s="".concat(D.hours<10?"0"+D.hours:D.hours,":").concat(D.minutes<10?"0"+D.minutes:D.minutes," ").concat(D.period),a="".concat(F.hours<10?"0"+F.hours:F.hours,":").concat(F.minutes<10?"0"+F.minutes:F.minutes," ").concat(F.period),l=await (0,v.Ci)({...N,time:"".concat(s,"-").concat(a),date:(0,E.Yq)(C,"dd/MM/yyyy")});if(l){e({title:"Error",description:l.message,variant:"destructive"});return}e({title:"Success",description:"Event Added Successfully"}),t(e=>[...e,{...N}]),g(k)},R=async()=>{if(!y)return;if(!D||!F){console.log("No start or endtime");return}let s="".concat(D.hours<10?"0"+D.hours:D.hours,":").concat(D.minutes<10?"0"+D.minutes:D.minutes," ").concat(D.period),a="".concat(F.hours<10?"0"+F.hours:F.hours,":").concat(F.minutes<10?"0"+F.minutes:F.minutes," ").concat(F.period),l=await (0,v.qM)({...N,time:"".concat(s,"-").concat(a),date:(0,E.Yq)(C,"dd/MM/yyyy")});if(l){e({title:"Error",description:l.message,variant:"destructive"});return}e({title:"Success",description:"Event Updated Successfully"}),t(e=>e.map(e=>e.id===y?N:e)),w(null),g(k)},I=e=>{var s,t,a;g(e),w(e.id);let l=Number(e.time.split(":")[0]),i=Number(e.time.split(":")[1].slice(0,2)),n=e.time.split(" ")[1].slice(0,2),r=Number(e.time.split("-")[1].split(":")[0]),c=Number(e.time.split("-")[1].split(":")[1].slice(0,2)),d=e.time.split(" ")[2];console.log({endHours:r,endMinutes:c,endPeriod:d}),M({hours:l,minutes:i,period:n}),$({hours:r,minutes:c,period:d}),T(new Date("".concat(null===(s=e.date)||void 0===s?void 0:s.split("/")[2],"-").concat(null===(t=e.date)||void 0===t?void 0:t.split("/")[1],"-").concat(null===(a=e.date)||void 0===a?void 0:a.split("/")[0])))},X=async s=>{let a=await (0,v.SX)(s);if(204==a.status)e({title:"Success",description:"Event was deleted successfully"});else{var l;e({title:String(a.status),description:null===(l=a.error)||void 0===l?void 0:l.message,variant:"destructive"});return}t(e=>e.filter(e=>e.id!==s)),y===s&&(w(null),g(k))};return(0,a.jsx)(p.a,{isLoading:b,children:(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)(h.Zp,{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium mb-4",children:y?"Edit Event":"Add New Event"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(f.A,{htmlFor:"htmlFor",id:"title",value:N.title,onChange:g,placeholder:"Event Title",type:"TEXT",title:"Title"}),(0,a.jsx)(f.A,{htmlFor:"description",id:"description",value:N.description,onChange:g,placeholder:"Detailed Description (Markdown)",type:"MARKDOWN",title:"Description"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(f.A,{htmlFor:"date",title:"Date",id:"date",value:N.date,onChange:g,placeholder:"".concat(new Date().getDate()," /").concat(new Date().getMonth(),"/").concat(new Date().getFullYear()," "),type:"DATE",date:C,setDate:T}),(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsx)(A,{startTime:D,endTime:F,onStartTimeChange:M,onEndTimeChange:$,error:q,className:"mb-4"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(f.A,{htmlFor:"location",title:"Locaton",id:"location",value:N.location,onChange:g,placeholder:"NAB L-27",type:"TEXT"}),(0,a.jsx)(f.A,{htmlFor:"capacity",title:"Capacity",id:"capacity",value:N.capacity,onChange:g,placeholder:"100",type:"TEXT"})]}),y?(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(i.$,{onClick:R,className:"flex-1",children:[(0,a.jsx)(c.A,{className:"h-4 w-4 mr-2"})," Update Event"]}),(0,a.jsx)(i.$,{variant:"destructive",onClick:()=>{w(null),g(k)},children:"Cancel"})]}):(0,a.jsxs)(i.$,{onClick:L,className:"w-full",children:[(0,a.jsx)(d.A,{className:"h-4 w-4 mr-2"})," Add Event"]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Current Events"}),0===s.length?(0,a.jsx)("p",{className:"text-gray-500 italic",children:"No events added yet."}):(0,a.jsx)(n.nD,{type:"single",collapsible:!0,className:"w-full",children:s.map(e=>(0,a.jsxs)(n.As,{value:e.id,children:[(0,a.jsx)(n.$m,{children:(0,a.jsxs)("div",{className:"flex justify-between items-center w-full pr-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(o.A,{className:"h-4 w-4 mr-2 text-gray-500"}),(0,a.jsx)("span",{children:e.title})]}),(0,a.jsx)("span",{className:"text-sm text-gray-500 mr-4",children:e.date})]})}),(0,a.jsx)(n.ub,{children:(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsx)("div",{className:"flex gap-4",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Full Description:"}),(0,a.jsx)("div",{className:"prose prose-sm max-w-none",children:(0,a.jsx)(x.$,{children:e.description})})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Date:"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.date})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Time:"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.time})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Location:"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.location})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Capacity:"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.capacity})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,a.jsxs)(i.$,{size:"sm",variant:"outline",onClick:()=>I(e),children:[(0,a.jsx)(m.A,{className:"h-4 w-4 mr-1"})," Edit"]}),(0,a.jsxs)(i.$,{size:"sm",variant:"destructive",onClick:()=>X(e.id),children:[(0,a.jsx)(u.A,{className:"h-4 w-4 mr-1"})," Delete"]})]})]})})]},e.id))}),(0,a.jsxs)(i.$,{onClick:()=>{localStorage.setItem("eventsData",JSON.stringify(s)),e({title:"Changes saved",description:"Events have been updated successfully."})},className:"w-full mt-4",children:[(0,a.jsx)(c.A,{className:"h-4 w-4 mr-2"})," Save All Changes"]})]})]})})}},6324:(e,s,t)=>{t.d(s,{Ci:()=>i,SX:()=>n,kQ:()=>l,qM:()=>r});var a=t(5263);let l=async()=>{let{data:e,error:s}=await a.S.from("events").select("*");return s&&console.log(s),e},i=async e=>{let{id:s,...t}=e,{error:l}=await a.S.from("events").insert(t);return l?(console.log(l),l):null},n=async e=>await a.S.from("events").delete().eq("id",e),r=async e=>{let{id:s,...t}=e,{error:l}=await a.S.from("events").update(t).eq("id",s);return l&&console.log(l),l}}}]);